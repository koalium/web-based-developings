<!DOCTYPE html>
<html lang="en" x-data="airWasherCalculator()" x-cloak>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirWasher Legacy Design System - Complete Engineering Solution</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0d47a1;
            --secondary-blue: #1976d2;
            --accent-blue: #42a5f5;
            --engineering-gray: #37474f;
            --light-gray: #eceff1;
            --warning-orange: #ff9800;
            --error-red: #d32f2f;
            --success-green: #388e3c;
            --eliminator-purple: #7b1fa2;
            --mto-teal: #00796b;
        }
        
        [x-cloak] { display: none !important; }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--engineering-gray);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 25px 0;
            border-bottom: 5px solid var(--accent-blue);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        h1 {
            font-size: 2.2rem;
            font-weight: 700;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 50%;
        }
        
        .system-status {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 500;
        }
        
        .tab-container {
            display: flex;
            gap: 5px;
            background-color: white;
            border-radius: 10px 10px 0 0;
            padding: 0 20px;
            margin-top: 20px;
            overflow-x: auto;
        }
        
        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            color: var(--engineering-gray);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s ease;
        }
        
        .tab:hover {
            background-color: var(--light-gray);
        }
        
        .tab.active {
            color: var(--primary-blue);
            border-bottom: 3px solid var(--primary-blue);
            background-color: #f0f7ff;
        }
        
        .tab-content {
            display: none;
            background-color: white;
            border-radius: 0 10px 10px 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 1024px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-blue);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .section-title i {
            font-size: 1.4rem;
        }
        
        h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        h3 {
            font-size: 1.2rem;
            color: var(--engineering-gray);
            margin-bottom: 15px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--engineering-gray);
        }
        
        .unit {
            color: var(--secondary-blue);
            font-weight: 500;
        }
        
        input[type="number"], select, input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus, select:focus, input[type="text"]:focus {
            border-color: var(--accent-blue);
            outline: none;
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary-blue);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0b3d8a;
        }
        
        .btn-secondary {
            background-color: var(--light-gray);
            color: var(--engineering-gray);
        }
        
        .btn-secondary:hover {
            background-color: #dde2e6;
        }
        
        .btn-eliminator {
            background-color: var(--eliminator-purple);
            color: white;
        }
        
        .warning-box {
            background-color: rgba(255, 152, 0, 0.1);
            border-left: 4px solid var(--warning-orange);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .info-box {
            background-color: rgba(33, 150, 243, 0.1);
            border-left: 4px solid var(--accent-blue);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .eliminator-box {
            background-color: rgba(123, 31, 162, 0.1);
            border-left: 4px solid var(--eliminator-purple);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .calculation-result {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .calc-item {
            background-color: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-blue);
        }
        
        .calc-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .calc-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
        }
        
        .calc-unit {
            font-size: 0.9rem;
            color: var(--secondary-blue);
            margin-left: 3px;
        }
        
        .component-list {
            margin-top: 20px;
        }
        
        .component-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .component-item:last-child {
            border-bottom: none;
        }
        
        .component-name {
            font-weight: 600;
        }
        
        .component-spec {
            color: var(--secondary-blue);
            text-align: right;
        }
        
        .air-velocity-indicator {
            height: 25px;
            background: linear-gradient(to right, #4caf50, #ff9800, #f44336);
            border-radius: 15px;
            margin: 15px 0;
            position: relative;
        }
        
        .velocity-marker {
            position: absolute;
            top: -5px;
            width: 3px;
            height: 35px;
            background-color: var(--engineering-gray);
        }
        
        .velocity-current {
            position: absolute;
            top: -10px;
            width: 12px;
            height: 12px;
            background-color: var(--primary-blue);
            border-radius: 50%;
            transform: translateX(-50%);
        }
        
        .velocity-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9rem;
        }
        
        .velocity-status {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
        }
        
        .velocity-optimal {
            color: var(--success-green);
        }
        
        .velocity-warning {
            color: var(--warning-orange);
        }
        
        .velocity-error {
            color: var(--error-red);
        }
        
        .bom-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .bom-table th {
            background-color: var(--light-gray);
            padding: 12px 15px;
            text-align: left;
            color: var(--engineering-gray);
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        .bom-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .bom-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .schematic-container {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            overflow: auto;
            min-height: 500px;
        }
        
        .schematic {
            width: 100%;
            min-width: 800px;
            height: 400px;
            position: relative;
            background: linear-gradient(to bottom, #e3f2fd, #f3e5f5);
        }
        
        .schematic-component {
            position: absolute;
            border: 2px solid var(--engineering-gray);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 0.8rem;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .schematic-component:hover {
            transform: scale(1.05);
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .schematic-label {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .schematic-details {
            font-size: 0.7rem;
            color: #666;
        }
        
        .air-inlet {
            background-color: rgba(66, 165, 245, 0.3);
            border-color: var(--accent-blue);
        }
        
        .air-baffles {
            background-color: rgba(121, 85, 72, 0.3);
            border-color: #795548;
        }
        
        .eliminator {
            background-color: rgba(123, 31, 162, 0.3);
            border-color: var(--eliminator-purple);
        }
        
        .air-outlet {
            background-color: rgba(76, 175, 80, 0.3);
            border-color: #4caf50;
        }
        
        .pump-section {
            background-color: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }
        
        .water-distribution {
            background-color: rgba(33, 150, 243, 0.3);
            border-color: #2196f3;
        }
        
        .control-panel {
            background-color: rgba(255, 193, 7, 0.3);
            border-color: #ffc107;
        }
        
        .footer {
            margin-top: 40px;
            text-align: center;
            color: #777;
            font-size: 0.9rem;
            padding: 20px 0;
            border-top: 1px solid #ddd;
        }
        
        .toggle-button {
            background-color: var(--light-gray);
            color: var(--engineering-gray);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .toggle-button:hover {
            background-color: #e0e0e0;
        }
        
        .color-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-actions {
            display: flex;
            gap: 10px;
        }
        
        .mto-summary {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .mto-card {
            background-color: var(--light-gray);
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid var(--mto-teal);
        }
        
        .mto-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--mto-teal);
            margin-bottom: 15px;
        }
        
        .mto-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #ccc;
        }
        
        .mto-item:last-child {
            border-bottom: none;
        }
        
        .mto-weight {
            font-weight: 600;
            color: var(--engineering-gray);
        }
        
        /* Touch-friendly adjustments */
        @media (hover: none) and (pointer: coarse) {
            input[type="number"], select, .btn, .tab {
                min-height: 48px;
                font-size: 16px;
            }
            
            .component-item, .bom-table td, .bom-table th {
                padding: 15px 10px;
            }
        }
        
        @media (max-width: 768px) {
            .tab-container {
                padding: 0 10px;
            }
            
            .tab {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }
        
        .fastener-table {
            font-size: 0.85rem;
        }
        
        .fastener-table th, .fastener-table td {
            padding: 8px 12px;
        }
        
        .note {
            font-size: 0.85rem;
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-wind"></i>
                    </div>
                    <div>
                        <h1>AirWasher Legacy Design System</h1>
                        <p>Complete Engineering Solution with Eliminator & MTO</p>
                    </div>
                </div>
                <div class="system-status" x-text="systemStatus"></div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="tab-container">
            <button class="tab active" data-tab="input">System Inputs</button>
            <button class="tab" data-tab="calculations">Calculations</button>
            <button class="tab" data-tab="eliminator">Eliminator System</button>
            <button class="tab" data-tab="bom">Complete BOM</button>
            <button class="tab" data-tab="mto">Material Take-Off</button>
            <button class="tab" data-tab="schematic">System Schematic</button>
            <button class="tab" data-tab="fasteners">Fasteners & Hardware</button>
        </div>
        
        <!-- Input Tab -->
        <div class="tab-content active" id="input">
            <div class="two-column">
                <div>
                    <div class="section-title">
                        <i class="fas fa-sliders-h"></i>
                        <h2>Main System Parameters</h2>
                    </div>
                    
                    <div class="input-group">
                        <label for="airflow">Airflow <span class="unit">(m³/s)</span></label>
                        <input type="number" id="airflow" x-model="airflow" step="0.1" min="1" max="100">
                        <p class="note">Default: 44 m³/s, Range: 20-100 m³/s</p>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="width">Width <span class="unit">(m)</span></label>
                            <input type="number" id="width" x-model="width" step="0.1" min="1" max="20">
                            <p class="note">Default: 4 m</p>
                        </div>
                        
                        <div class="input-group">
                            <label for="height">Height <span class="unit">(m)</span></label>
                            <input type="number" id="height" x-model="height" step="0.1" min="1" max="20">
                            <p class="note">Default: 3 m</p>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="zoneCount">Zone Count</label>
                        <select id="zoneCount" x-model="zoneCount">
                            <option value="1">1 Zone</option>
                            <option value="2">2 Zones</option>
                            <option value="3">3 Zones</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="pumpCount">Pump Count</label>
                        <div class="input-row">
                            <input type="number" id="pumpCount" x-model="pumpCount" min="1" max="4" step="1">
                            <button class="btn btn-secondary" @click="pumpCount = 1">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                        <p class="note">Default: 1 pump, Maximum: 4 pumps</p>
                    </div>
                    
                    <!-- Air Velocity Rule Warning -->
                    <div class="warning-box" x-show="showVelocityWarning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Air Velocity Rule:</strong> Air velocity must be between 3.33 m/s and 3.77 m/s, never exceed 3.9 m/s.
                    </div>
                    
                    <!-- Velocity Status Indicator -->
                    <div class="input-group" x-show="airVelocity > 0">
                        <label>Air Velocity Status: <span x-text="airVelocity.toFixed(2)"></span> m/s</label>
                        <div class="air-velocity-indicator">
                            <div class="velocity-marker" style="left: 33.3%;"></div>
                            <div class="velocity-marker" style="left: 66.6%;"></div>
                            <div class="velocity-marker" style="left: 90%;"></div>
                            <div class="velocity-current" :style="{ left: velocityPercentage + '%' }"></div>
                        </div>
                        <div class="velocity-labels">
                            <span>3.0 m/s</span>
                            <span>3.33 m/s</span>
                            <span>3.77 m/s</span>
                            <span>3.9 m/s</span>
                        </div>
                        <div class="velocity-status" :class="velocityStatusClass" x-text="velocityStatusText"></div>
                    </div>
                </div>
                
                <div>
                    <div class="section-title">
                        <i class="fas fa-cog"></i>
                        <h2>Eliminator Parameters</h2>
                    </div>
                    
                    <div class="input-group">
                        <label for="eliminatorType">Eliminator Type</label>
                        <select id="eliminatorType" x-model="eliminatorType">
                            <option value="chevron">Chevron Type</option>
                            <option value="zigzag">Zig-Zag Type</option>
                            <option value="cellular">Cellular Type</option>
                            <option value="wave">Wave Plate Type</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="eliminatorMaterial">Eliminator Material</label>
                        <select id="eliminatorMaterial" x-model="eliminatorMaterial">
                            <option value="pvc">PVC (Polyvinyl Chloride)</option>
                            <option value="pp">PP (Polypropylene)</option>
                            <option value="aluminum">Aluminum 6061</option>
                            <option value="stainless">Stainless Steel 304</option>
                        </select>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="eliminatorBladeSpacing">Blade Spacing <span class="unit">(mm)</span></label>
                            <input type="number" id="eliminatorBladeSpacing" x-model="eliminatorBladeSpacing" step="1" min="10" max="50">
                            <p class="note">Typical: 15-25 mm</p>
                        </div>
                        
                        <div class="input-group">
                            <label for="eliminatorBladeAngle">Blade Angle <span class="unit">(°)</span></label>
                            <input type="number" id="eliminatorBladeAngle" x-model="eliminatorBladeAngle" step="1" min="30" max="120">
                            <p class="note">Typical: 90-120°</p>
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="eliminatorThickness">Plate Thickness <span class="unit">(mm)</span></label>
                            <input type="number" id="eliminatorThickness" x-model="eliminatorThickness" step="0.1" min="0.5" max="3">
                            <p class="note">Typical: 1.0-1.5 mm</p>
                        </div>
                        
                        <div class="input-group">
                            <label for="eliminatorDepth">Eliminator Depth <span class="unit">(m)</span></label>
                            <input type="number" id="eliminatorDepth" x-model="eliminatorDepth" step="0.1" min="0.1" max="1">
                            <p class="note">Typical: 0.3-0.6 m</p>
                        </div>
                    </div>
                    
                    <div class="eliminator-box">
                        <i class="fas fa-info-circle"></i>
                        <strong>Eliminator Function:</strong> Removes water droplets from air stream with minimum pressure drop. Efficiency depends on blade spacing, angle, and material.
                    </div>
                    
                    <button class="btn btn-primary" @click="recalculateAll()" style="width: 100%; margin-top: 20px;">
                        <i class="fas fa-calculator"></i> Calculate Complete System
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Calculations Tab -->
        <div class="tab-content" id="calculations">
            <div class="two-column">
                <div>
                    <div class="section-title">
                        <i class="fas fa-calculator"></i>
                        <h2>Basic AirWasher Calculations</h2>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Cross Section Area</div>
                            <div class="calc-value">
                                <span x-text="crossSection.toFixed(3)"></span>
                                <span class="calc-unit">m²</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Air Velocity</div>
                            <div class="calc-value" :class="velocityStatusClass">
                                <span x-text="airVelocity.toFixed(3)"></span>
                                <span class="calc-unit">m/s</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Air Velocity Status</div>
                            <div class="calc-value" :class="velocityStatusClass" x-text="velocityStatusText"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">System Airflow</div>
                            <div class="calc-value">
                                <span x-text="(airflow * 3600).toFixed(0)"></span>
                                <span class="calc-unit">m³/h</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-th"></i>
                        <h2>Air Baffle System</h2>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Parts per Row</div>
                            <div class="calc-value" x-text="bafflePartsPerRow"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Parts per Column</div>
                            <div class="calc-value" x-text="bafflePartsPerColumn"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Baffle Parts</div>
                            <div class="calc-value" x-text="totalBaffleParts"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Baffle Mass</div>
                            <div class="calc-value">
                                <span x-text="totalBaffleMass.toFixed(1)"></span>
                                <span class="calc-unit">kg</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <i class="fas fa-info-circle"></i>
                        <strong>Baffle Details:</strong> ABS Hit Cast material, each part 0.3m × 0.4m × 0.05m, 13.6 kg each. Provides uniform air distribution.
                    </div>
                </div>
                
                <div>
                    <div class="section-title">
                        <i class="fas fa-tint"></i>
                        <h2>Water Distribution System</h2>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Collector Length</div>
                            <div class="calc-value">
                                <span x-text="collectorLength.toFixed(3)"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Riser Length</div>
                            <div class="calc-value">
                                <span x-text="riserLength.toFixed(3)"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Riser Count</div>
                            <div class="calc-value" x-text="totalRiserCount"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Nozzle Count</div>
                            <div class="calc-value" x-text="totalNozzleCount"></div>
                        </div>
                    </div>
                    
                    <div class="calculation-result" style="margin-top: 20px;">
                        <div class="calc-item">
                            <div class="calc-label">Water Flow per Nozzle</div>
                            <div class="calc-value">
                                <span x-text="waterFlowPerNozzle"></span>
                                <span class="calc-unit">lit/min</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Water Flow</div>
                            <div class="calc-value">
                                <span x-text="totalWaterFlow.toFixed(1)"></span>
                                <span class="calc-unit">lit/min</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Water Flow per Pump</div>
                            <div class="calc-value">
                                <span x-text="waterFlowPerPump.toFixed(1)"></span>
                                <span class="calc-unit">lit/min</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Water Head Pump</div>
                            <div class="calc-value">
                                <span x-text="waterHeadPump"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-tachometer-alt"></i>
                        <h2>Pump & Motor Selection</h2>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Required Motor Power</div>
                            <div class="calc-value">
                                <span x-text="motorPower.toFixed(1)"></span>
                                <span class="calc-unit">kW</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Motor Efficiency</div>
                            <div class="calc-value">
                                <span x-text="motorEfficiency"></span>
                                <span class="calc-unit">%</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Pump Efficiency</div>
                            <div class="calc-value">
                                <span x-text="pumpEfficiency"></span>
                                <span class="calc-unit">%</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Power Consumption</div>
                            <div class="calc-value">
                                <span x-text="totalPowerConsumption.toFixed(1)"></span>
                                <span class="calc-unit">kW</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Eliminator Tab -->
        <div class="tab-content" id="eliminator">
            <div class="two-column">
                <div>
                    <div class="section-title">
                        <i class="fas fa-filter"></i>
                        <h2>Eliminator System Calculations</h2>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Eliminator Type</div>
                            <div class="calc-value" x-text="eliminatorType.toUpperCase()"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Eliminator Material</div>
                            <div class="calc-value" x-text="eliminatorMaterialDetails"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Number of Blades</div>
                            <div class="calc-value" x-text="eliminatorBladeCount"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Blade Area</div>
                            <div class="calc-value">
                                <span x-text="eliminatorBladeArea.toFixed(2)"></span>
                                <span class="calc-unit">m²</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculation-result" style="margin-top: 20px;">
                        <div class="calc-item">
                            <div class="calc-label">Pressure Drop</div>
                            <div class="calc-value">
                                <span x-text="eliminatorPressureDrop.toFixed(2)"></span>
                                <span class="calc-unit">Pa</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Droplet Removal Efficiency</div>
                            <div class="calc-value">
                                <span x-text="eliminatorEfficiency"></span>
                                <span class="calc-unit">%</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Eliminator Weight</div>
                            <div class="calc-value">
                                <span x-text="eliminatorWeight.toFixed(1)"></span>
                                <span class="calc-unit">kg</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Material Density</div>
                            <div class="calc-value">
                                <span x-text="eliminatorMaterialDensity"></span>
                                <span class="calc-unit">kg/m³</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="eliminator-box">
                        <i class="fas fa-info-circle"></i>
                        <strong>Eliminator Performance:</strong> 
                        <div x-text="eliminatorPerformanceText"></div>
                    </div>
                    
                    <div class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-layer-group"></i>
                        <h2>Eliminator Frame & Support</h2>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Frame Material</div>
                            <div class="calc-value">Galvanized Steel</div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Frame Weight</div>
                            <div class="calc-value">
                                <span x-text="eliminatorFrameWeight.toFixed(1)"></span>
                                <span class="calc-unit">kg</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Support Brackets</div>
                            <div class="calc-value" x-text="eliminatorSupportBrackets"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Eliminator Weight</div>
                            <div class="calc-value">
                                <span x-text="totalEliminatorWeight.toFixed(1)"></span>
                                <span class="calc-unit">kg</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="section-title">
                        <i class="fas fa-clipboard-list"></i>
                        <h2>Eliminator Bill of Materials</h2>
                    </div>
                    
                    <table class="bom-table">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Description</th>
                                <th>Material</th>
                                <th>Dimensions</th>
                                <th>Qty</th>
                                <th>Unit Weight (kg)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Blade/Plate</td>
                                <td x-text="'Eliminator ' + eliminatorType + ' blade'"></td>
                                <td x-text="eliminatorMaterialDetails"></td>
                                <td><span x-text="eliminatorBladeSpacing"></span> mm spacing, <span x-text="eliminatorThickness"></span> mm thick</td>
                                <td x-text="eliminatorBladeCount"></td>
                                <td x-text="eliminatorBladeWeight.toFixed(2)"></td>
                            </tr>
                            <tr>
                                <td>Side Frame</td>
                                <td>Side support frame</td>
                                <td>Galvanized Steel</td>
                                <td>40×40×3 mm L-profile</td>
                                <td>2</td>
                                <td><span x-text="(eliminatorFrameWeight/4).toFixed(1)"></span></td>
                            </tr>
                            <tr>
                                <td>Top/Bottom Frame</td>
                                <td>Top and bottom support</td>
                                <td>Galvanized Steel</td>
                                <td>40×40×3 mm L-profile</td>
                                <td>2</td>
                                <td><span x-text="(eliminatorFrameWeight/4).toFixed(1)"></span></td>
                            </tr>
                            <tr>
                                <td>Support Bracket</td>
                                <td>Wall mounting bracket</td>
                                <td>Galvanized Steel</td>
                                <td>50×50×5 mm L-profile, 300 mm long</td>
                                <td x-text="eliminatorSupportBrackets"></td>
                                <td>2.3</td>
                            </tr>
                            <tr>
                                <td>Blade Spacer</td>
                                <td>Blade separation spacer</td>
                                <td>PVC/PP</td>
                                <td><span x-text="eliminatorBladeSpacing"></span> mm long, Ø10 mm</td>
                                <td x-text="eliminatorBladeCount * 2"></td>
                                <td>0.02</td>
                            </tr>
                            <tr>
                                <td>Connection Bolt</td>
                                <td>M8×40 Bolt with nut</td>
                                <td>Stainless Steel A2-70</td>
                                <td>M8×40 mm</td>
                                <td x-text="eliminatorBoltCount"></td>
                                <td>0.04</td>
                            </tr>
                            <tr>
                                <td>Washer</td>
                                <td>M8 Flat washer</td>
                                <td>Stainless Steel</td>
                                <td>M8, 1.5 mm thick</td>
                                <td x-text="eliminatorBoltCount * 2"></td>
                                <td>0.005</td>
                            </tr>
                            <tr>
                                <td>Sealant</td>
                                <td>Silicone sealant</td>
                                <td>Silicone</td>
                                <td>310 ml cartridge</td>
                                <td><span x-text="Math.ceil(eliminatorSealantTubes)"></span></td>
                                <td>0.4</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="eliminator-box" style="margin-top: 20px;">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Installation Notes:</strong> 
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Install eliminator after air washer section and before air outlet</li>
                            <li>Ensure proper sealing at frame edges to prevent air bypass</li>
                            <li>Check blade alignment for uniform airflow distribution</li>
                            <li>Install drain channel at bottom for collected water</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Complete BOM Tab -->
        <div class="tab-content" id="bom">
            <div class="section-header">
                <div class="section-title">
                    <i class="fas fa-clipboard-check"></i>
                    <h2>Complete Bill of Materials (BOM)</h2>
                </div>
                <div class="section-actions">
                    <button class="btn btn-secondary" @click="printBOM()">
                        <i class="fas fa-print"></i> Print BOM
                    </button>
                    <button class="btn btn-primary" @click="exportBOM()">
                        <i class="fas fa-file-export"></i> Export CSV
                    </button>
                </div>
            </div>
            
            <div class="color-legend">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #e8f5e9;"></div>
                    <span>Air Baffle System</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #e3f2fd;"></div>
                    <span>Water Distribution</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #f3e5f5;"></div>
                    <span>Eliminator System</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #fff8e1;"></div>
                    <span>Pump & Motor</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #fce4ec;"></div>
                    <span>Piping & Valves</span>
                </div>
            </div>
            
            <table class="bom-table">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Part Number</th>
                        <th>Description</th>
                        <th>Material / Specification</th>
                        <th>Standard</th>
                        <th>Qty</th>
                        <th>Unit</th>
                        <th>Unit Weight (kg)</th>
                        <th>Total Weight (kg)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Air Baffle System -->
                    <tr style="background-color: #e8f5e9;">
                        <td rowspan="5"><strong>Air Baffle System</strong></td>
                        <td>ABS-300×400</td>
                        <td>Air baffle plate</td>
                        <td>ABS Hit Cast, 0.3×0.4×0.05 m</td>
                        <td>ISO 2580-1</td>
                        <td x-text="totalBaffleParts"></td>
                        <td>pc</td>
                        <td>13.6</td>
                        <td x-text="(totalBaffleParts * 13.6).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e8f5e9;">
                        <td>SUP-40×40×3</td>
                        <td>Baffle support frame</td>
                        <td>Galvanized steel L-profile 40×40×3 mm</td>
                        <td>ASTM A653</td>
                        <td x-text="baffleFrameCount"></td>
                        <td>m</td>
                        <td>2.5</td>
                        <td x-text="(baffleFrameCount * 2.5).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e8f5e9;">
                        <td>BOLT-M10×50</td>
                        <td>M10×50 mounting bolt with nut</td>
                        <td>Stainless steel A2-70, hex head</td>
                        <td>ISO 4017</td>
                        <td x-text="baffleBoltCount"></td>
                        <td>pc</td>
                        <td>0.08</td>
                        <td x-text="(baffleBoltCount * 0.08).toFixed(2)"></td>
                    </tr>
                    <tr style="background-color: #e8f5e9;">
                        <td>WASH-M10</td>
                        <td>M10 flat washer</td>
                        <td>Stainless steel, 2 mm thick</td>
                        <td>ISO 7089</td>
                        <td x-text="baffleBoltCount * 2"></td>
                        <td>pc</td>
                        <td>0.012</td>
                        <td x-text="(baffleBoltCount * 2 * 0.012).toFixed(2)"></td>
                    </tr>
                    <tr style="background-color: #e8f5e9;">
                        <td>GASK-3mm</td>
                        <td>Sealing gasket</td>
                        <td>EPDM rubber, 3 mm thick</td>
                        <td>ISO 4633</td>
                        <td x-text="baffleGasketCount"></td>
                        <td>m</td>
                        <td>0.4</td>
                        <td x-text="(baffleGasketCount * 0.4).toFixed(1)"></td>
                    </tr>
                    
                    <!-- Water Distribution System -->
                    <tr style="background-color: #e3f2fd;">
                        <td rowspan="8"><strong>Water Distribution</strong></td>
                        <td>COL-4IN</td>
                        <td>Collector pipe</td>
                        <td x-text="'PVC Schedule 40, Ø' + collectorSize + ' inch'"></td>
                        <td>ASTM D1785</td>
                        <td x-text="zoneCount"></td>
                        <td>m</td>
                        <td x-text="collectorUnitWeight"></td>
                        <td x-text="(zoneCount * collectorUnitWeight * collectorLength).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>RIS-1.25IN</td>
                        <td>Riser pipe</td>
                        <td x-text="'Galvanized steel, Ø' + riserSize + ' inch'"></td>
                        <td>ASTM A53</td>
                        <td x-text="totalRiserCount"></td>
                        <td>m</td>
                        <td x-text="riserUnitWeight"></td>
                        <td x-text="(totalRiserCount * riserUnitWeight * riserLength).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>NOZ-FC25</td>
                        <td>Full cone nozzle</td>
                        <td>Brass, 2.6 l/min at 3 bar, 1/4" NPT</td>
                        <td>ISO 15873</td>
                        <td x-text="totalNozzleCount"></td>
                        <td>pc</td>
                        <td>0.15</td>
                        <td x-text="(totalNozzleCount * 0.15).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>ADP-1.25×0.25</td>
                        <td>Nozzle adapter</td>
                        <td>Brass, 1/4" NPT male to 1/4" NPT female</td>
                        <td>ASME B16.11</td>
                        <td x-text="totalNozzleCount"></td>
                        <td>pc</td>
                        <td>0.05</td>
                        <td x-text="(totalNozzleCount * 0.05).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>SUP-RISER</td>
                        <td>Riser support bracket</td>
                        <td>Galvanized steel, 2 mm thick</td>
                        <td>ASTM A653</td>
                        <td x-text="totalRiserCount * 3"></td>
                        <td>pc</td>
                        <td>0.3</td>
                        <td x-text="(totalRiserCount * 3 * 0.3).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>DIST-PIPE</td>
                        <td>Distribution pipe</td>
                        <td x-text="'PVC Schedule 40, Ø' + distributerSize + ' inch'"></td>
                        <td>ASTM D1785</td>
                        <td x-show="zoneCount > 1" x-text="zoneCount"></td>
                        <td x-show="zoneCount == 1">1</td>
                        <td>m</td>
                        <td x-text="distributerUnitWeight"></td>
                        <td x-show="zoneCount > 1" x-text="(zoneCount * distributerUnitWeight * distributerLength).toFixed(1)"></td>
                        <td x-show="zoneCount == 1" x-text="(distributerUnitWeight * distributerLength).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>TEE-1.25IN</td>
                        <td>Tee connection</td>
                        <td x-text="'Galvanized steel, Ø' + riserSize + ' inch'"></td>
                        <td>ASME B16.9</td>
                        <td x-text="totalRiserCount"></td>
                        <td>pc</td>
                        <td>0.4</td>
                        <td x-text="(totalRiserCount * 0.4).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>END-CAP-1.25</td>
                        <td>End cap</td>
                        <td x-text="'Galvanized steel, Ø' + riserSize + ' inch'"></td>
                        <td>ASME B16.9</td>
                        <td x-text="totalRiserCount"></td>
                        <td>pc</td>
                        <td>0.1</td>
                        <td x-text="(totalRiserCount * 0.1).toFixed(1)"></td>
                    </tr>
                    
                    <!-- Eliminator System (already detailed in eliminator tab, showing summary here) -->
                    <tr style="background-color: #f3e5f5;">
                        <td rowspan="4"><strong>Eliminator System</strong></td>
                        <td>ELIM-BLADE</td>
                        <td x-text="'Eliminator ' + eliminatorType + ' blade'"></td>
                        <td x-text="eliminatorMaterialDetails + ', ' + eliminatorBladeSpacing + 'mm spacing'"></td>
                        <td>ISO 5801</td>
                        <td x-text="eliminatorBladeCount"></td>
                        <td>pc</td>
                        <td x-text="eliminatorBladeWeight.toFixed(2)"></td>
                        <td x-text="(eliminatorBladeCount * eliminatorBladeWeight).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #f3e5f5;">
                        <td>ELIM-FRAME</td>
                        <td>Eliminator frame</td>
                        <td>Galvanized steel L-profile 40×40×3 mm</td>
                        <td>ASTM A653</td>
                        <td>4</td>
                        <td>pc</td>
                        <td x-text="(eliminatorFrameWeight/4).toFixed(1)"></td>
                        <td x-text="eliminatorFrameWeight.toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #f3e5f5;">
                        <td>ELIM-SUPPORT</td>
                        <td>Support bracket</td>
                        <td>Galvanized steel L-profile 50×50×5 mm</td>
                        <td>ASTM A653</td>
                        <td x-text="eliminatorSupportBrackets"></td>
                        <td>pc</td>
                        <td>2.3</td>
                        <td x-text="(eliminatorSupportBrackets * 2.3).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #f3e5f5;">
                        <td>ELIM-DRAIN</td>
                        <td>Drain channel</td>
                        <td>PVC U-channel, 100×50 mm</td>
                        <td>ASTM D1785</td>
                        <td>1</td>
                        <td>m</td>
                        <td>3.5</td>
                        <td x-text="(width * 3.5).toFixed(1)"></td>
                    </tr>
                    
                    <!-- Pump & Motor System -->
                    <tr style="background-color: #fff8e1;">
                        <td rowspan="6"><strong>Pump & Motor</strong></td>
                        <td>PUMP-CF-<span x-text="pumpSize"></span></td>
                        <td>Centrifugal pump</td>
                        <td x-text="'Cast iron, ' + pumpFlowRate.toFixed(1) + ' m³/h, ' + waterHeadPump + ' m head'"></td>
                        <td>ISO 5199</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td x-text="pumpWeight"></td>
                        <td x-text="(pumpCount * pumpWeight).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fff8e1;">
                        <td>MOT-3PH-<span x-text="motorPower.toFixed(1)"></span>KW</td>
                        <td>3-phase induction motor</td>
                        <td x-text="motorPower.toFixed(1) + ' kW, ' + motorEfficiency + '%, IE3 efficiency'"></td>
                        <td>IEC 60034</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td x-text="motorWeight"></td>
                        <td x-text="(pumpCount * motorWeight).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fff8e1;">
                        <td>COUPLING</td>
                        <td>Flexible coupling</td>
                        <td>Rubber element, bore matched to pump/motor shaft</td>
                        <td>ISO 10441</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td>2.5</td>
                        <td x-text="(pumpCount * 2.5).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fff8e1;">
                        <td>BASE-PLATE</td>
                        <td>Pump base plate</td>
                        <td>Steel plate 10 mm thick, drilled for pump/motor</td>
                        <td>ASTM A36</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td>25</td>
                        <td x-text="(pumpCount * 25).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fff8e1;">
                        <td>VFD-<span x-text="motorPower.toFixed(1)"></span>KW</td>
                        <td>Variable frequency drive</td>
                        <td x-text="motorPower.toFixed(1) + ' kW, 3-phase input, IP55 enclosure'"></td>
                        <td>IEC 61800</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td>8</td>
                        <td x-text="(pumpCount * 8).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fff8e1;">
                        <td>CABLE-4C×<span x-text="motorCableSize"></span></td>
                        <td>Motor power cable</td>
                        <td x-text="'Copper, 4-core, ' + motorCableSize + ' mm², XLPE insulated'"></td>
                        <td>IEC 60228</td>
                        <td x-text="pumpCount"></td>
                        <td>m</td>
                        <td>0.5</td>
                        <td x-text="(pumpCount * 15 * 0.5).toFixed(1)"></td>
                    </tr>
                    
                    <!-- Piping & Valves -->
                    <tr style="background-color: #fce4ec;">
                        <td rowspan="10"><strong>Piping & Valves</strong></td>
                        <td>PIPE-SUC-<span x-text="suctionSize"></span>IN</td>
                        <td>Suction pipe</td>
                        <td x-text="'PVC Schedule 40, Ø' + suctionSize + ' inch'"></td>
                        <td>ASTM D1785</td>
                        <td x-text="pumpCount"></td>
                        <td>m</td>
                        <td x-text="suctionPipeUnitWeight"></td>
                        <td x-text="(pumpCount * suctionPipeUnitWeight * 3).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>PIPE-DIS-<span x-text="drainSize"></span>IN</td>
                        <td>Discharge pipe</td>
                        <td x-text="'PVC Schedule 40, Ø' + drainSize + ' inch'"></td>
                        <td>ASTM D1785</td>
                        <td x-text="pumpCount"></td>
                        <td>m</td>
                        <td x-text="dischargePipeUnitWeight"></td>
                        <td x-text="(pumpCount * dischargePipeUnitWeight * 5).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>VALVE-GATE-<span x-text="valveSize"></span>IN</td>
                        <td>Gate valve</td>
                        <td x-text="'Bronze, flanged, Ø' + valveSize + ' inch'"></td>
                        <td>API 600</td>
                        <td x-text="pumpCount * 2"></td>
                        <td>pc</td>
                        <td x-text="valveWeight"></td>
                        <td x-text="(pumpCount * 2 * valveWeight).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>VALVE-CHECK-<span x-text="valveSize"></span>IN</td>
                        <td>Check valve</td>
                        <td x-text="'Swing type, bronze, Ø' + valveSize + ' inch'"></td>
                        <td>API 6D</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td x-text="valveWeight * 0.8"></td>
                        <td x-text="(pumpCount * valveWeight * 0.8).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>FLANGE-<span x-text="flangeSize"></span>IN-150#</td>
                        <td>Flange</td>
                        <td x-text="'Class 150, RF, Ø' + flangeSize + ' inch'"></td>
                        <td>ASME B16.5</td>
                        <td x-text="flangeCount"></td>
                        <td>pc</td>
                        <td x-text="flangeWeight"></td>
                        <td x-text="(flangeCount * flangeWeight).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>ELBOW-90-<span x-text="elbowSize"></span>IN</td>
                        <td>90° elbow</td>
                        <td x-text="'Long radius, Ø' + elbowSize + ' inch'"></td>
                        <td>ASME B16.9</td>
                        <td x-text="elbowCount"></td>
                        <td>pc</td>
                        <td x-text="elbowWeight"></td>
                        <td x-text="(elbowCount * elbowWeight).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>REDUCER-<span x-text="suctionSize"></span>×<span x-text="drainSize"></span></td>
                        <td>Reducer concentric</td>
                        <td x-text="'Ø' + suctionSize + ' to Ø' + drainSize + ' inch'"></td>
                        <td>ASME B16.9</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td>1.2</td>
                        <td x-text="(pumpCount * 1.2).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>GASKET-FL-<span x-text="flangeSize"></span>IN</td>
                        <td>Flange gasket</td>
                        <td x-text="'Rubber, Ø' + flangeSize + ' inch'"></td>
                        <td>ASME B16.21</td>
                        <td x-text="flangeCount * 2"></td>
                        <td>pc</td>
                        <td>0.1</td>
                        <td x-text="(flangeCount * 2 * 0.1).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>BOLT-FL-<span x-text="flangeSize"></span>IN</td>
                        <td>Flange bolt set</td>
                        <td x-text="'M16×100, ' + flangeBoltCountPerFlange + ' per flange'"></td>
                        <td>ISO 4014</td>
                        <td x-text="flangeCount"></td>
                        <td>set</td>
                        <td x-text="flangeBoltWeightPerSet"></td>
                        <td x-text="(flangeCount * flangeBoltWeightPerSet).toFixed(1)"></td>
                    </tr>
                    <tr style="background-color: #fce4ec;">
                        <td>FILTER-<span x-text="filterSize"></span>MESH</td>
                        <td>Strainer filter</td>
                        <td x-text="'Cast iron, ' + filterSize + ' mesh, Ø' + filterPipeSize + ' inch'"></td>
                        <td>ASME B16.34</td>
                        <td x-text="pumpCount"></td>
                        <td>pc</td>
                        <td>12</td>
                        <td x-text="(pumpCount * 12).toFixed(1)"></td>
                    </tr>
                    
                    <!-- Control & Instrumentation -->
                    <tr style="background-color: #e0f2f1;">
                        <td rowspan="5"><strong>Control & Instrumentation</strong></td>
                        <td>PLC-CPU</td>
                        <td>Programmable logic controller</td>
                        <td>24 VDC, 16DI/16DO, Ethernet</td>
                        <td>IEC 61131</td>
                        <td>1</td>
                        <td>pc</td>
                        <td>3.5</td>
                        <td>3.5</td>
                    </tr>
                    <tr style="background-color: #e0f2f1;">
                        <td>FLOW-METER</td>
                        <td>Flow meter</td>
                        <td>Electromagnetic, DN50, 4-20 mA output</td>
                        <td>ISO 6817</td>
                        <td>1</td>
                        <td>pc</td>
                        <td>5.2</td>
                        <td>5.2</td>
                    </tr>
                    <tr style="background-color: #e0f2f1;">
                        <td>PRESSURE-TRANS</td>
                        <td>Pressure transmitter</td>
                        <td>0-10 bar, 4-20 mA output, G1/2" connection</td>
                        <td>IEC 60770</td>
                        <td>2</td>
                        <td>pc</td>
                        <td>0.8</td>
                        <td>1.6</td>
                    </tr>
                    <tr style="background-color: #e0f2f1;">
                        <td>LEVEL-SWITCH</td>
                        <td>Level switch</td>
                        <td>Float type, PVC, for water tank</td>
                        <td>IEC 60529</td>
                        <td>2</td>
                        <td>pc</td>
                        <td>0.5</td>
                        <td>1.0</td>
                    </tr>
                    <tr style="background-color: #e0f2f1;">
                        <td>CONTROL-PANEL</td>
                        <td>Control panel</td>
                        <td>Stainless steel 304, IP65, 800×600×200 mm</td>
                        <td>IEC 61439</td>
                        <td>1</td>
                        <td>pc</td>
                        <td>45</td>
                        <td>45</td>
                    </tr>
                    
                    <!-- Totals Row -->
                    <tr style="background-color: #424242; color: white;">
                        <td colspan="7"><strong>TOTAL WEIGHT</strong></td>
                        <td colspan="2"><strong><span x-text="totalSystemWeight.toFixed(1)"></span> kg</strong></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="info-box" style="margin-top: 20px;">
                <i class="fas fa-exclamation-circle"></i>
                <strong>Note:</strong> Weights are approximate. Actual weights may vary based on manufacturer specifications. 
                All fasteners (bolts, nuts, washers) are included in their respective sections.
            </div>
        </div>
        
        <!-- Material Take-Off Tab -->
        <div class="tab-content" id="mto">
            <div class="section-title">
                <i class="fas fa-weight-hanging"></i>
                <h2>Material Take-Off (MTO) Summary</h2>
            </div>
            
            <div class="mto-summary">
                <div class="mto-card">
                    <div class="mto-title">Total Material Weight by Category</div>
                    <div class="mto-item">
                        <span>Air Baffle System</span>
                        <span class="mto-weight" x-text="baffleSystemWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Water Distribution System</span>
                        <span class="mto-weight" x-text="waterSystemWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Eliminator System</span>
                        <span class="mto-weight" x-text="totalEliminatorWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Pump & Motor System</span>
                        <span class="mto-weight" x-text="pumpSystemWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Piping & Valves</span>
                        <span class="mto-weight" x-text="pipingSystemWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Control & Instrumentation</span>
                        <span class="mto-weight" x-text="controlSystemWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item" style="border-top: 2px solid var(--mto-teal); padding-top: 10px; margin-top: 10px;">
                        <strong>Total System Weight</strong>
                        <strong class="mto-weight" x-text="totalSystemWeight.toFixed(1)"> kg</strong>
                    </div>
                </div>
                
                <div class="mto-card">
                    <div class="mto-title">Material by Type</div>
                    <div class="mto-item">
                        <span>Steel (Galvanized)</span>
                        <span class="mto-weight" x-text="steelWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>ABS Plastic</span>
                        <span class="mto-weight" x-text="absWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>PVC/PP Pipes</span>
                        <span class="mto-weight" x-text="pvcWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Eliminator Material (<span x-text="eliminatorMaterial"></span>)</span>
                        <span class="mto-weight" x-text="eliminatorMaterialWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Cast Iron</span>
                        <span class="mto-weight" x-text="castIronWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Brass/Copper</span>
                        <span class="mto-weight" x-text="brassWeight.toFixed(1)"> kg</span>
                    </div>
                    <div class="mto-item">
                        <span>Stainless Steel</span>
                        <span class="mto-weight" x-text="stainlessWeight.toFixed(1)"> kg</span>
                    </div>
                </div>
                
                <div class="mto-card">
                    <div class="mto-title">Fastener Summary</div>
                    <div class="mto-item">
                        <span>Bolts (M8, M10, M16)</span>
                        <span class="mto-weight" x-text="totalBoltCount"></span>
                    </div>
                    <div class="mto-item">
                        <span>Nuts (M8, M10, M16)</span>
                        <span class="mto-weight" x-text="totalNutCount"></span>
                    </div>
                    <div class="mto-item">
                        <span>Washers (Various sizes)</span>
                        <span class="mto-weight" x-text="totalWasherCount"></span>
                    </div>
                    <div class="mto-item">
                        <span>Screws (Self-tapping)</span>
                        <span class="mto-weight" x-text="totalScrewCount"></span>
                    </div>
                    <div class="mto-item">
                        <span>Anchor Bolts (M12×150)</span>
                        <span class="mto-weight" x-text="anchorBoltCount"></span>
                    </div>
                    <div class="mto-item">
                        <span>Total Fastener Weight</span>
                        <span class="mto-weight" x-text="totalFastenerWeight.toFixed(1)"> kg</span>
                    </div>
                </div>
            </div>
            
            <div class="section-title" style="margin-top: 40px;">
                <i class="fas fa-shipping-fast"></i>
                <h2>Shipping & Handling Requirements</h2>
            </div>
            
            <div class="calculation-result">
                <div class="calc-item">
                    <div class="calc-label">Total Shipping Volume</div>
                    <div class="calc-value">
                        <span x-text="shippingVolume.toFixed(1)"></span>
                        <span class="calc-unit">m³</span>
                    </div>
                </div>
                
                <div class="calc-item">
                    <div class="calc-label">Estimated Pallet Count</div>
                    <div class="calc-value" x-text="palletCount"></div>
                </div>
                
                <div class="calc-item">
                    <div class="calc-label">Container Type Required</div>
                    <div class="calc-value" x-text="containerType"></div>
                </div>
                
                <div class="calc-item">
                    <div class="calc-label">Approx. Shipping Weight</div>
                    <div class="calc-value">
                        <span x-text="(totalSystemWeight * 1.1).toFixed(0)"></span>
                        <span class="calc-unit">kg</span>
                    </div>
                </div>
            </div>
            
            <div class="info-box" style="margin-top: 20px;">
                <i class="fas fa-clipboard-check"></i>
                <strong>MTO Notes:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>All weights include packaging materials (approx. 10% extra)</li>
                    <li>Fasteners are packed separately in labeled boxes</li>
                    <li>Eliminator blades should be packed flat to prevent deformation</li>
                    <li>Pumps and motors require separate crating with vibration damping</li>
                    <li>Control panel shipped separately with anti-static packaging</li>
                </ul>
            </div>
        </div>
        
        <!-- System Schematic Tab -->
        <div class="tab-content" id="schematic">
            <div class="section-title">
                <i class="fas fa-project-diagram"></i>
                <h2>AirWasher System Schematic Layout</h2>
            </div>
            
            <div class="schematic-container">
                <div class="schematic" id="schematicDiagram">
                    <!-- Schematic components will be added by JavaScript -->
                </div>
            </div>
            
            <div class="color-legend" style="margin-top: 20px;">
                <div class="legend-item">
                    <div class="legend-color air-inlet" style="border-color: var(--accent-blue);"></div>
                    <span>Air Inlet Section</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color air-baffles" style="border-color: #795548;"></div>
                    <span>Air Baffles</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color eliminator" style="border-color: var(--eliminator-purple);"></div>
                    <span>Eliminator</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color water-distribution" style="border-color: #2196f3;"></div>
                    <span>Water Distribution</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color pump-section" style="border-color: #f44336;"></div>
                    <span>Pump & Motor</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color control-panel" style="border-color: #ffc107;"></div>
                    <span>Control Panel</span>
                </div>
            </div>
            
            <div class="two-column" style="margin-top: 30px;">
                <div>
                    <div class="section-title">
                        <i class="fas fa-info-circle"></i>
                        <h3>Schematic Key Dimensions</h3>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Overall Length</div>
                            <div class="calc-value">
                                <span x-text="schematicLength.toFixed(2)"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Overall Height</div>
                            <div class="calc-value">
                                <span x-text="schematicHeight.toFixed(2)"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Air Washer Section</div>
                            <div class="calc-value">
                                <span x-text="schematicWasherLength.toFixed(2)"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Eliminator Section</div>
                            <div class="calc-value">
                                <span x-text="schematicEliminatorLength.toFixed(2)"></span>
                                <span class="calc-unit">m</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="section-title">
                        <i class="fas fa-directions"></i>
                        <h3>Air & Water Flow Path</h3>
                    </div>
                    
                    <div class="info-box">
                        <i class="fas fa-route"></i>
                        <strong>Air Flow Path:</strong> Inlet → Pre-filter → Air Baffles → Water Spray → Eliminator → Outlet
                    </div>
                    
                    <div class="info-box">
                        <i class="fas fa-water"></i>
                        <strong>Water Flow Path:</strong> Sump → Pump → Filter → Distribution Pipe → Nozzles → Collection → Sump
                    </div>
                    
                    <div class="calculation-result" style="margin-top: 20px;">
                        <div class="calc-item">
                            <div class="calc-label">Air Velocity</div>
                            <div class="calc-value">
                                <span x-text="airVelocity.toFixed(2)"></span>
                                <span class="calc-unit">m/s</span>
                            </div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Water Flow Rate</div>
                            <div class="calc-value">
                                <span x-text="totalWaterFlow.toFixed(1)"></span>
                                <span class="calc-unit">lit/min</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Fasteners & Hardware Tab -->
        <div class="tab-content" id="fasteners">
            <div class="section-title">
                <i class="fas fa-screwdriver"></i>
                <h2>Fasteners & Hardware Details</h2>
            </div>
            
            <table class="bom-table fastener-table">
                <thead>
                    <tr>
                        <th>Fastener Type</th>
                        <th>Size / Specification</th>
                        <th>Material / Grade</th>
                        <th>Standard</th>
                        <th>Quantity</th>
                        <th>Unit Weight (g)</th>
                        <th>Application</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Hex Head Bolt</td>
                        <td>M8×40 mm</td>
                        <td>Stainless Steel A2-70</td>
                        <td>ISO 4017</td>
                        <td x-text="m8BoltCount"></td>
                        <td>40</td>
                        <td>Eliminator frame assembly</td>
                    </tr>
                    <tr>
                        <td>Hex Head Bolt</td>
                        <td>M10×50 mm</td>
                        <td>Stainless Steel A2-70</td>
                        <td>ISO 4017</td>
                        <td x-text="m10BoltCount"></td>
                        <td>80</td>
                        <td>Baffle support frame</td>
                    </tr>
                    <tr>
                        <td>Hex Head Bolt</td>
                        <td>M12×100 mm</td>
                        <td>Carbon Steel 8.8</td>
                        <td>ISO 4017</td>
                        <td x-text="m12BoltCount"></td>
                        <td>120</td>
                        <td>Pump base plate to foundation</td>
                    </tr>
                    <tr>
                        <td>Hex Head Bolt</td>
                        <td>M16×100 mm</td>
                        <td>Carbon Steel 8.8</td>
                        <td>ISO 4017</td>
                        <td x-text="m16BoltCount"></td>
                        <td>300</td>
                        <td>Flange connections</td>
                    </tr>
                    <tr>
                        <td>Hex Nut</td>
                        <td>M8</td>
                        <td>Stainless Steel A2-70</td>
                        <td>ISO 4032</td>
                        <td x-text="m8BoltCount"></td>
                        <td>8</td>
                        <td>For M8 bolts</td>
                    </tr>
                    <tr>
                        <td>Hex Nut</td>
                        <td>M10</td>
                        <td>Stainless Steel A2-70</td>
                        <td>ISO 4032</td>
                        <td x-text="m10BoltCount"></td>
                        <td>15</td>
                        <td>For M10 bolts</td>
                    </tr>
                    <tr>
                        <td>Hex Nut</td>
                        <td>M12</td>
                        <td>Carbon Steel 8.8</td>
                        <td>ISO 4032</td>
                        <td x-text="m12BoltCount"></td>
                        <td>25</td>
                        <td>For M12 bolts</td>
                    </tr>
                    <tr>
                        <td>Hex Nut</td>
                        <td>M16</td>
                        <td>Carbon Steel 8.8</td>
                        <td>ISO 4032</td>
                        <td x-text="m16BoltCount"></td>
                        <td>60</td>
                        <td>For M16 bolts</td>
                    </tr>
                    <tr>
                        <td>Flat Washer</td>
                        <td>M8</td>
                        <td>Stainless Steel</td>
                        <td>ISO 7089</td>
                        <td x-text="m8BoltCount * 2"></td>
                        <td>5</td>
                        <td>For M8 bolts</td>
                    </tr>
                    <tr>
                        <td>Flat Washer</td>
                        <td>M10</td>
                        <td>Stainless Steel</td>
                        <td>ISO 7089</td>
                        <td x-text="m10BoltCount * 2"></td>
                        <td>12</td>
                        <td>For M10 bolts</td>
                    </tr>
                    <tr>
                        <td>Flat Washer</td>
                        <td>M12</td>
                        <td>Carbon Steel</td>
                        <td>ISO 7089</td>
                        <td x-text="m12BoltCount * 2"></td>
                        <td>20</td>
                        <td>For M12 bolts</td>
                    </tr>
                    <tr>
                        <td>Flat Washer</td>
                        <td>M16</td>
                        <td>Carbon Steel</td>
                        <td>ISO 7089</td>
                        <td x-text="m16BoltCount * 2"></td>
                        <td>40</td>
                        <td>For M16 bolts</td>
                    </tr>
                    <tr>
                        <td>Spring Washer</td>
                        <td>M10</td>
                        <td>Stainless Steel</td>
                        <td>ISO 10683</td>
                        <td x-text="m10BoltCount"></td>
                        <td>8</td>
                        <td>Vibration resistance for baffles</td>
                    </tr>
                    <tr>
                        <td>Self-tapping Screw</td>
                        <td>ST4.2×19 mm</td>
                        <td>Stainless Steel</td>
                        <td>ISO 1478</td>
                        <td x-text="selfTappingScrewCount"></td>
                        <td>3</td>
                        <td>Sheet metal assembly</td>
                    </tr>
                    <tr>
                        <td>Anchor Bolt</td>
                        <td>M12×150 mm</td>
                        <td>Hot-dip Galvanized</td>
                        <td>ISO 898-1</td>
                        <td x-text="anchorBoltCount"></td>
                        <td>180</td>
                        <td>Foundation mounting</td>
                    </tr>
                    <tr>
                        <td>Pipe Clamp</td>
                        <td>For Ø<span x-text="riserSize"></span>" pipe</td>
                        <td>Galvanized Steel</td>
                        <td>ISO 1461</td>
                        <td x-text="pipeClampCount"></td>
                        <td>85</td>
                        <td>Pipe support</td>
                    </tr>
                    <tr>
                        <td>Cable Tie</td>
                        <td>100×2.5 mm</td>
                        <td>Nylon 6.6</td>
                        <td>UL 62275</td>
                        <td x-text="cableTieCount"></td>
                        <td>2</td>
                        <td>Cable management</td>
                    </tr>
                    <tr>
                        <td>Thread Seal Tape</td>
                        <td>12 mm × 10 m</td>
                        <td>PTFE</td>
                        <td>ASTM D3308</td>
                        <td x-text="threadSealTapeRolls"></td>
                        <td>50</td>
                        <td>Pipe thread sealing</td>
                    </tr>
                    <tr>
                        <td>Silicone Sealant</td>
                        <td>310 ml cartridge</td>
                        <td>Neutral Cure Silicone</td>
                        <td>ISO 11600</td>
                        <td x-text="siliconeSealantCartridges"></td>
                        <td>400</td>
                        <td>Waterproof sealing</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="two-column" style="margin-top: 30px;">
                <div>
                    <div class="section-title">
                        <i class="fas fa-toolbox"></i>
                        <h3>Installation Tools Required</h3>
                    </div>
                    
                    <div class="info-box">
                        <ul style="margin-left: 20px;">
                            <li>Torque Wrench: 10-100 Nm range</li>
                            <li>Socket Set: 8 mm to 24 mm</li>
                            <li>Pipe Wrench: 12" and 24"</li>
                            <li>Pipe Threader: For <span x-text="riserSize"></span>" pipes</li>
                            <li>Drill Machine: 13 mm capacity with metal bits</li>
                            <li>Hex Key Set: Metric 3-10 mm</li>
                            <li>Tube Cutter: For PVC pipes</li>
                            <li>Level: 1 m spirit level</li>
                            <li>Tape Measure: 8 m minimum</li>
                            <li>Caulking Gun: For sealant application</li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <div class="section-title">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>Fastener Packaging</h3>
                    </div>
                    
                    <div class="calculation-result">
                        <div class="calc-item">
                            <div class="calc-label">Total Bolt Count</div>
                            <div class="calc-value" x-text="totalBoltCount"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Nut Count</div>
                            <div class="calc-value" x-text="totalNutCount"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Total Washer Count</div>
                            <div class="calc-value" x-text="totalWasherCount"></div>
                        </div>
                        
                        <div class="calc-item">
                            <div class="calc-label">Fastener Boxes Required</div>
                            <div class="calc-value" x-text="fastenerBoxCount"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>AirWasher Legacy Design System v3.0 | Complete Engineering Solution with Eliminator & MTO</p>
            <p>© 2023 AirWasher Systems. All calculations based on ISO, ASME, API, and IEC Standards.</p>
        </div>
    </div>
    
    <script>
        function airWasherCalculator() {
            return {
                // Input values
                airflow: 44,
                width: 4,
                height: 3,
                zoneCount: 1,
                pumpCount: 1,
                
                // Eliminator parameters
                eliminatorType: 'chevron',
                eliminatorMaterial: 'pvc',
                eliminatorBladeSpacing: 20,
                eliminatorBladeAngle: 90,
                eliminatorThickness: 1.2,
                eliminatorDepth: 0.4,
                
                // Calculated values
                crossSection: 0,
                airVelocity: 0,
                bafflePartsPerRow: 0,
                bafflePartsPerColumn: 0,
                totalBaffleParts: 0,
                totalBaffleMass: 0,
                collectorLength: 0,
                riserLength: 0,
                totalRiserCount: 0,
                totalNozzleCount: 0,
                waterFlowPerNozzle: 2.6,
                totalWaterFlow: 0,
                waterFlowPerPump: 0,
                waterHeadPump: 35,
                motorPower: 0,
                motorEfficiency: 88,
                pumpEfficiency: 75,
                totalPowerConsumption: 0,
                
                // Eliminator calculated values
                eliminatorBladeCount: 0,
                eliminatorBladeArea: 0,
                eliminatorPressureDrop: 0,
                eliminatorEfficiency: 0,
                eliminatorWeight: 0,
                eliminatorFrameWeight: 0,
                totalEliminatorWeight: 0,
                eliminatorSupportBrackets: 0,
                eliminatorBoltCount: 0,
                eliminatorSealantTubes: 0,
                eliminatorBladeWeight: 0,
                
                // Component specifications
                collectorSize: 4,
                riserSize: 1.25,
                suctionSize: "6",
                drainSize: "4",
                pumpSize: "80",
                impellerDiameter: "280",
                impellerThickness: "8",
                filterSize: "80",
                valveSize: "4",
                flangeSize: "4",
                elbowSize: "4",
                filterPipeSize: "4",
                flangeCount: 0,
                elbowCount: 0,
                flangeBoltCountPerFlange: 4,
                flangeBoltWeightPerSet: 1.2,
                
                // Distributer
                distributerLength: 0,
                distributerSize: "8",
                distributerFlanges: 0,
                distributerSupports: 0,
                distributerUnitWeight: 0,
                
                // Weight calculations
                baffleSystemWeight: 0,
                waterSystemWeight: 0,
                eliminatorSystemWeight: 0,
                pumpSystemWeight: 0,
                pipingSystemWeight: 0,
                controlSystemWeight: 0,
                totalSystemWeight: 0,
                
                // Material weights
                steelWeight: 0,
                absWeight: 0,
                pvcWeight: 0,
                eliminatorMaterialWeight: 0,
                castIronWeight: 0,
                brassWeight: 0,
                stainlessWeight: 0,
                
                // Fastener counts
                m8BoltCount: 0,
                m10BoltCount: 0,
                m12BoltCount: 0,
                m16BoltCount: 0,
                selfTappingScrewCount: 0,
                anchorBoltCount: 0,
                pipeClampCount: 0,
                cableTieCount: 0,
                threadSealTapeRolls: 0,
                siliconeSealantCartridges: 0,
                
                // Schematic dimensions
                schematicLength: 0,
                schematicHeight: 0,
                schematicWasherLength: 0,
                schematicEliminatorLength: 0,
                
                // Shipping
                shippingVolume: 0,
                palletCount: 0,
                containerType: "",
                
                // UI State
                showVelocityWarning: true,
                currentTab: 'input',
                
                // Computed properties
                get systemStatus() {
                    if (this.airVelocity >= 3.33 && this.airVelocity <= 3.77) {
                        return "System Optimal";
                    } else if (this.airVelocity > 3.9) {
                        return "CRITICAL: Velocity Exceeded";
                    } else {
                        return "Design Verification Needed";
                    }
                },
                
                get velocityPercentage() {
                    const min = 3.0;
                    const max = 4.0;
                    const value = Math.min(Math.max(this.airVelocity, min), max);
                    return ((value - min) / (max - min)) * 100;
                },
                
                get velocityStatusClass() {
                    if (this.airVelocity >= 3.33 && this.airVelocity <= 3.77) {
                        return "velocity-optimal";
                    } else if (this.airVelocity > 3.9) {
                        return "velocity-error";
                    } else {
                        return "velocity-warning";
                    }
                },
                
                get velocityStatusText() {
                    if (this.airVelocity >= 3.33 && this.airVelocity <= 3.77) {
                        return "Optimal";
                    } else if (this.airVelocity > 3.9) {
                        return "Exceeds Maximum (3.9 m/s)";
                    } else if (this.airVelocity < 3.33) {
                        return "Below Minimum (3.33 m/s)";
                    } else {
                        return "Above Optimal (3.77 m/s)";
                    }
                },
                
                get eliminatorMaterialDetails() {
                    const materials = {
                        'pvc': 'PVC (Polyvinyl Chloride)',
                        'pp': 'PP (Polypropylene)',
                        'aluminum': 'Aluminum 6061',
                        'stainless': 'Stainless Steel 304'
                    };
                    return materials[this.eliminatorMaterial] || 'PVC';
                },
                
                get eliminatorMaterialDensity() {
                    const densities = {
                        'pvc': 1380,
                        'pp': 900,
                        'aluminum': 2700,
                        'stainless': 7930
                    };
                    return densities[this.eliminatorMaterial] || 1380;
                },
                
                get eliminatorPerformanceText() {
                    if (this.eliminatorPressureDrop < 50) {
                        return "Low pressure drop design, suitable for energy-efficient operation.";
                    } else if (this.eliminatorPressureDrop < 100) {
                        return "Moderate pressure drop, good balance between efficiency and droplet removal.";
                    } else {
                        return "High pressure drop, excellent droplet removal but higher energy consumption.";
                    }
                },
                
                get pumpFlowRate() {
                    return (this.waterFlowPerPump / 1000) * 60; // Convert l/min to m³/h
                },
                
                get pumpWeight() {
                    if (this.pumpFlowRate < 5) return 45;
                    if (this.pumpFlowRate < 10) return 65;
                    if (this.pumpFlowRate < 20) return 85;
                    return 120;
                },
                
                get motorWeight() {
                    if (this.motorPower < 2) return 25;
                    if (this.motorPower < 5) return 45;
                    if (this.motorPower < 10) return 85;
                    return 120;
                },
                
                get collectorUnitWeight() {
                    // kg/m for 4" PVC pipe
                    return 3.5;
                },
                
                get riserUnitWeight() {
                    // kg/m for 1.25" galvanized pipe
                    return 1.8;
                },
                
                get suctionPipeUnitWeight() {
                    // kg/m for 6" PVC pipe
                    return 8.5;
                },
                
                get dischargePipeUnitWeight() {
                    // kg/m for 4" PVC pipe
                    return 3.5;
                },
                
                get valveWeight() {
                    // kg per valve
                    return 4.5;
                },
                
                get flangeWeight() {
                    // kg per flange
                    return 2.8;
                },
                
                get elbowWeight() {
                    // kg per elbow
                    return 1.2;
                },
                
                get baffleFrameCount() {
                    return this.width * 2 + this.height * 2;
                },
                
                get baffleBoltCount() {
                    return this.totalBaffleParts * 4;
                },
                
                get baffleGasketCount() {
                    return this.width * 2 + this.height * 2;
                },
                
                get totalBoltCount() {
                    return this.m8BoltCount + this.m10BoltCount + this.m12BoltCount + this.m16BoltCount;
                },
                
                get totalNutCount() {
                    return this.m8BoltCount + this.m10BoltCount + this.m12BoltCount + this.m16BoltCount;
                },
                
                get totalWasherCount() {
                    return (this.m8BoltCount + this.m10BoltCount) * 2 + (this.m12BoltCount + this.m16BoltCount) * 2;
                },
                
                get totalScrewCount() {
                    return this.selfTappingScrewCount;
                },
                
                get totalFastenerWeight() {
                    return (this.m8BoltCount * 0.04) + (this.m10BoltCount * 0.08) + (this.m12BoltCount * 0.12) + 
                           (this.m16BoltCount * 0.3) + (this.totalNutCount * 0.03) + (this.totalWasherCount * 0.01);
                },
                
                get fastenerBoxCount() {
                    return Math.ceil(this.totalBoltCount / 100) + Math.ceil(this.totalNutCount / 200) + Math.ceil(this.totalWasherCount / 300);
                },
                
                get motorCableSize() {
                    if (this.motorPower < 2) return 2.5;
                    if (this.motorPower < 5) return 4;
                    if (this.motorPower < 10) return 6;
                    return 10;
                },
                
                // Initialization
                init() {
                    this.recalculateAll();
                    this.setupTabs();
                    this.drawSchematic();
                    
                    // Watch for changes to redraw schematic
                    this.$watch('width', () => this.drawSchematic());
                    this.$watch('height', () => this.drawSchematic());
                    this.$watch('zoneCount', () => this.drawSchematic());
                    this.$watch('eliminatorDepth', () => this.drawSchematic());
                },
                
                // Tab switching
                setupTabs() {
                    const tabs = document.querySelectorAll('.tab');
                    const tabContents = document.querySelectorAll('.tab-content');
                    
                    tabs.forEach(tab => {
                        tab.addEventListener('click', () => {
                            const tabId = tab.getAttribute('data-tab');
                            
                            // Update active tab
                            tabs.forEach(t => t.classList.remove('active'));
                            tab.classList.add('active');
                            
                            // Show active tab content
                            tabContents.forEach(content => {
                                content.classList.remove('active');
                                if (content.id === tabId) {
                                    content.classList.add('active');
                                    
                                    // Redraw schematic when schematic tab is opened
                                    if (tabId === 'schematic') {
                                        setTimeout(() => this.drawSchematic(), 100);
                                    }
                                }
                            });
                            
                            this.currentTab = tabId;
                        });
                    });
                },
                
                // Main calculation function
                recalculateAll() {
                    // Basic calculations
                    this.crossSection = this.width * this.height;
                    this.airVelocity = this.airflow / this.crossSection;
                    
                    // Air baffle calculations
                    const bafflePartWidth = 0.3;
                    const bafflePartHeight = 0.4;
                    const bafflePartMass = 13.6;
                    
                    this.bafflePartsPerRow = Math.round(this.width / bafflePartWidth);
                    if (this.bafflePartsPerRow * bafflePartWidth < this.width) {
                        this.bafflePartsPerRow += 1;
                    }
                    
                    this.bafflePartsPerColumn = Math.round(this.height / bafflePartHeight);
                    if (this.bafflePartsPerColumn * bafflePartHeight < this.height) {
                        this.bafflePartsPerColumn += 1;
                    }
                    
                    this.totalBaffleParts = this.bafflePartsPerRow * this.bafflePartsPerColumn;
                    this.totalBaffleMass = this.totalBaffleParts * bafflePartMass;
                    
                    // Water distribution calculations
                    this.collectorLength = this.width - 0.15;
                    
                    // Riser length calculation
                    const collectorSizeMeters = this.collectorSize * 0.0254;
                    this.riserLength = this.height - (0.025 * collectorSizeMeters) - 0.75;
                    
                    // Riser count calculation
                    const spaceBetweenRisers = 0.304;
                    let riserPerZone1Count = Math.round((this.width - 0.152) / spaceBetweenRisers);
                    
                    this.totalRiserCount = riserPerZone1Count;
                    
                    if (this.zoneCount == 2) {
                        let riserPerZone2Count;
                        if (riserPerZone1Count * (spaceBetweenRisers + 1) + this.riserSize * 0.0275 < this.width) {
                            riserPerZone2Count = riserPerZone1Count + 1;
                        } else {
                            riserPerZone2Count = riserPerZone1Count;
                        }
                        this.totalRiserCount = riserPerZone1Count + riserPerZone2Count;
                    } else if (this.zoneCount == 3) {
                        this.totalRiserCount = riserPerZone1Count * 3;
                    }
                    
                    // Nozzle count calculation
                    const spaceBetweenNozzles = 0.076;
                    const nozzlePerRiserCount = Math.round(this.riserLength / spaceBetweenNozzles);
                    this.totalNozzleCount = this.totalRiserCount * nozzlePerRiserCount;
                    
                    // Water flow calculations
                    this.totalWaterFlow = this.waterFlowPerNozzle * this.totalNozzleCount;
                    this.waterFlowPerPump = this.totalWaterFlow / this.pumpCount;
                    const waterFlowPumpM3s = (this.waterFlowPerPump * 0.001) / 60;
                    
                    // Motor power calculation
                    const density = 1000;
                    const g = 9.81;
                    this.motorPower = (waterFlowPumpM3s * this.waterHeadPump * density * g) / (this.pumpEfficiency/100 * 1000);
                    this.totalPowerConsumption = this.motorPower / (this.motorEfficiency/100);
                    
                    // Eliminator calculations
                    this.calculateEliminator();
                    
                    // Component sizing based on flow rates
                    if (this.waterFlowPerPump < 50) {
                        this.suctionSize = "4";
                        this.drainSize = "3";
                        this.impellerDiameter = "200";
                        this.valveSize = "3";
                        this.flangeSize = "3";
                        this.elbowSize = "3";
                        this.filterPipeSize = "3";
                        this.pumpSize = "50";
                    } else if (this.waterFlowPerPump < 100) {
                        this.suctionSize = "5";
                        this.drainSize = "4";
                        this.impellerDiameter = "250";
                        this.valveSize = "4";
                        this.flangeSize = "4";
                        this.elbowSize = "4";
                        this.filterPipeSize = "4";
                        this.pumpSize = "80";
                    } else {
                        this.suctionSize = "6";
                        this.drainSize = "5";
                        this.impellerDiameter = "300";
                        this.valveSize = "5";
                        this.flangeSize = "5";
                        this.elbowSize = "5";
                        this.filterPipeSize = "5";
                        this.pumpSize = "100";
                    }
                    
                    // Distributer for zones
                    if (this.zoneCount > 1) {
                        this.distributerLength = this.collectorLength / this.zoneCount;
                        this.distributerSize = (this.collectorSize * 2).toString();
                        this.distributerFlanges = 4 * this.zoneCount;
                        this.distributerSupports = Math.ceil(this.distributerLength / 1.5) * this.zoneCount;
                    } else {
                        this.distributerLength = this.collectorLength;
                        this.distributerSize = (this.collectorSize * 2).toString();
                        this.distributerFlanges = 2;
                        this.distributerSupports = Math.ceil(this.distributerLength / 1.5);
                    }
                    
                    // Calculate weights
                    this.calculateWeights();
                    
                    // Calculate fastener counts
                    this.calculateFasteners();
                    
                    // Calculate shipping
                    this.calculateShipping();
                    
                    // Calculate schematic dimensions
                    this.schematicLength = this.width + 2 + this.eliminatorDepth;
                    this.schematicHeight = this.height + 1.5;
                    this.schematicWasherLength = this.width;
                    this.schematicEliminatorLength = this.eliminatorDepth;
                    
                    // Show warning if velocity is outside optimal range
                    this.showVelocityWarning = this.airVelocity < 3.33 || this.airVelocity > 3.77;
                },
                
                // Eliminator calculations
                calculateEliminator() {
                    // Number of blades based on eliminator depth and blade spacing
                    this.eliminatorBladeCount = Math.floor(this.eliminatorDepth * 1000 / this.eliminatorBladeSpacing);
                    
                    // Blade area (both sides)
                    const bladeHeight = this.height * 0.9; // 90% of total height
                    const bladeWidth = this.width * 0.9; // 90% of total width
                    const bladeAreaPerBlade = bladeHeight * bladeWidth;
                    this.eliminatorBladeArea = this.eliminatorBladeCount * bladeAreaPerBlade * 2; // Both sides
                    
                    // Pressure drop calculation (simplified)
                    // Based on air velocity and blade angle
                    const basePressureDrop = 25; // Pa at 3.5 m/s
                    const velocityFactor = Math.pow(this.airVelocity / 3.5, 2);
                    const angleFactor = 1 + (Math.abs(this.eliminatorBladeAngle - 90) / 90) * 0.5;
                    const spacingFactor = 1 + (25 - this.eliminatorBladeSpacing) / 50;
                    
                    this.eliminatorPressureDrop = basePressureDrop * velocityFactor * angleFactor * spacingFactor;
                    
                    // Efficiency calculation
                    const baseEfficiency = 98; // % at optimal conditions
                    const efficiencyReduction = (this.eliminatorBladeSpacing - 15) * 0.2; // 0.2% reduction per mm above 15mm
                    this.eliminatorEfficiency = Math.max(85, baseEfficiency - efficiencyReduction);
                    
                    // Weight calculation
                    const bladeVolume = bladeHeight * bladeWidth * (this.eliminatorThickness / 1000); // m³
                    this.eliminatorBladeWeight = bladeVolume * this.eliminatorMaterialDensity; // kg
                    this.eliminatorWeight = this.eliminatorBladeCount * this.eliminatorBladeWeight;
                    
                    // Frame weight (galvanized steel)
                    const frameLength = (this.width + this.height) * 2;
                    const frameProfileWeight = 2.5; // kg/m for 40×40×3 mm L-profile
                    this.eliminatorFrameWeight = frameLength * frameProfileWeight;
                    
                    // Support brackets
                    this.eliminatorSupportBrackets = Math.ceil(this.width / 1.5) * 2; // Both sides
                    
                    // Bolt count
                    this.eliminatorBoltCount = this.eliminatorBladeCount * 4 + this.eliminatorSupportBrackets * 4;
                    
                    // Sealant (tubes)
                    const sealantLength = (this.width + this.height) * 2 * 2; // Both sides of frame
                    this.eliminatorSealantTubes = sealantLength / 15; // 15 m per 310 ml tube
                    
                    // Total eliminator weight
                    this.totalEliminatorWeight = this.eliminatorWeight + this.eliminatorFrameWeight + 
                                                (this.eliminatorSupportBrackets * 2.3) + (this.eliminatorBoltCount * 0.04);
                },
                
                // Weight calculations
                calculateWeights() {
                    // Baffle system weight
                    this.baffleSystemWeight = this.totalBaffleMass + 
                                             (this.baffleFrameCount * 2.5) + 
                                             (this.baffleBoltCount * 0.08) + 
                                             (this.baffleGasketCount * 0.4);
                    
                    // Water system weight
                    this.waterSystemWeight = (this.zoneCount * this.collectorUnitWeight * this.collectorLength) +
                                            (this.totalRiserCount * this.riserUnitWeight * this.riserLength) +
                                            (this.totalNozzleCount * 0.15) +
                                            (this.totalNozzleCount * 0.05) +
                                            (this.totalRiserCount * 3 * 0.3) +
                                            (this.zoneCount * this.distributerUnitWeight * this.distributerLength) +
                                            (this.totalRiserCount * 0.4) +
                                            (this.totalRiserCount * 0.1);
                    
                    // Eliminator system weight (already calculated)
                    this.eliminatorSystemWeight = this.totalEliminatorWeight;
                    
                    // Pump system weight
                    this.pumpSystemWeight = (this.pumpCount * this.pumpWeight) +
                                           (this.pumpCount * this.motorWeight) +
                                           (this.pumpCount * 2.5) +
                                           (this.pumpCount * 25) +
                                           (this.pumpCount * 8) +
                                           (this.pumpCount * 15 * 0.5);
                    
                    // Piping system weight
                    this.pipingSystemWeight = (this.pumpCount * this.suctionPipeUnitWeight * 3) +
                                             (this.pumpCount * this.dischargePipeUnitWeight * 5) +
                                             (this.pumpCount * 2 * this.valveWeight) +
                                             (this.pumpCount * this.valveWeight * 0.8) +
                                             (this.flangeCount * this.flangeWeight) +
                                             (this.elbowCount * this.elbowWeight) +
                                             (this.pumpCount * 1.2) +
                                             (this.flangeCount * 2 * 0.1) +
                                             (this.flangeCount * this.flangeBoltWeightPerSet) +
                                             (this.pumpCount * 12);
                    
                    // Control system weight
                    this.controlSystemWeight = 3.5 + 5.2 + 1.6 + 1.0 + 45;
                    
                    // Total system weight
                    this.totalSystemWeight = this.baffleSystemWeight + this.waterSystemWeight + 
                                            this.eliminatorSystemWeight + this.pumpSystemWeight + 
                                            this.pipingSystemWeight + this.controlSystemWeight;
                    
                    // Material weights
                    this.steelWeight = (this.baffleFrameCount * 2.5) + (this.eliminatorFrameWeight) + 
                                      (this.eliminatorSupportBrackets * 2.3) + (this.totalRiserCount * this.riserUnitWeight * this.riserLength) +
                                      (this.totalRiserCount * 3 * 0.3) + (this.pumpCount * 25) + (this.flangeCount * this.flangeWeight) +
                                      (this.elbowCount * this.elbowWeight);
                    
                    this.absWeight = this.totalBaffleMass;
                    this.pvcWeight = (this.zoneCount * this.collectorUnitWeight * this.collectorLength) +
                                    (this.zoneCount * this.distributerUnitWeight * this.distributerLength) +
                                    (this.pumpCount * this.suctionPipeUnitWeight * 3) +
                                    (this.pumpCount * this.dischargePipeUnitWeight * 5);
                    
                    this.eliminatorMaterialWeight = this.eliminatorWeight;
                    this.castIronWeight = (this.pumpCount * this.pumpWeight) + (this.pumpCount * 12);
                    this.brassWeight = (this.totalNozzleCount * 0.15) + (this.totalNozzleCount * 0.05);
                    this.stainlessWeight = (this.m8BoltCount * 0.04) + (this.m10BoltCount * 0.08) + 
                                          (this.m8BoltCount * 0.008) + (this.m10BoltCount * 0.015) +
                                          (this.m8BoltCount * 2 * 0.005) + (this.m10BoltCount * 2 * 0.012);
                },
                
                // Fastener calculations
                calculateFasteners() {
                    // Bolt counts
                    this.m8BoltCount = this.eliminatorBoltCount;
                    this.m10BoltCount = this.baffleBoltCount;
                    this.m12BoltCount = this.pumpCount * 4; // For pump base
                    this.m16BoltCount = this.flangeCount * this.flangeBoltCountPerFlange;
                    
                    // Other fasteners
                    this.selfTappingScrewCount = this.totalBaffleParts * 2;
                    this.anchorBoltCount = this.pumpCount * 4 + Math.ceil(this.width / 2) * 2;
                    this.pipeClampCount = this.totalRiserCount * 3 + this.pumpCount * 6;
                    this.cableTieCount = 50;
                    this.threadSealTapeRolls = Math.ceil(this.totalRiserCount / 10) + this.pumpCount;
                    this.siliconeSealantCartridges = Math.ceil(this.eliminatorSealantTubes) + 2;
                },
                
                // Shipping calculations
                calculateShipping() {
                    // Shipping volume
                    const baffleVolume = this.width * this.height * 0.1; // Baffles packed flat
                    const eliminatorVolume = this.width * this.height * 0.05; // Eliminator packed
                    const pumpVolume = this.pumpCount * 0.5; // Each pump in crate
                    const pipeVolume = (this.collectorLength * this.zoneCount * 0.15) + 
                                      (this.riserLength * this.totalRiserCount * 0.02);
                    
                    this.shippingVolume = baffleVolume + eliminatorVolume + pumpVolume + pipeVolume + 5; // +5 m³ for packaging
                    
                    // Pallet count
                    this.palletCount = Math.ceil(this.shippingVolume / 1.5);
                    
                    // Container type
                    if (this.shippingVolume < 33) {
                        this.containerType = "20' Standard Container";
                    } else if (this.shippingVolume < 67) {
                        this.containerType = "40' Standard Container";
                    } else {
                        this.containerType = "40' High Cube Container";
                    }
                },
                
                // Draw schematic
                drawSchematic() {
                    const schematic = document.getElementById('schematicDiagram');
                    if (!schematic) return;
                    
                    schematic.innerHTML = '';
                    
                    // Schematic dimensions
                    const schematicWidth = schematic.clientWidth;
                    const schematicHeight = schematic.clientHeight;
                    
                    // Scale factors
                    const scaleX = schematicWidth / (this.width + this.eliminatorDepth + 2);
                    const scaleY = schematicHeight / (this.height + 1.5);
                    
                    // Air inlet section
                    this.addSchematicComponent(schematic, 'Air Inlet', 0.2 * scaleX, 0.3 * scaleY, 0.8 * scaleX, this.height * scaleY * 0.7, 'air-inlet', 'Air Inlet', `Velocity: ${this.airVelocity.toFixed(2)} m/s`);
                    
                    // Air baffles
                    this.addSchematicComponent(schematic, 'Air Baffles', 1 * scaleX, 0.3 * scaleY, this.width * scaleX * 0.8, this.height * scaleY * 0.7, 'air-baffles', 'Air Baffles', `${this.totalBaffleParts} plates, ${this.totalBaffleMass.toFixed(0)} kg`);
                    
                    // Eliminator
                    this.addSchematicComponent(schematic, 'Eliminator', (1 + this.width * 0.8) * scaleX, 0.3 * scaleY, this.eliminatorDepth * scaleX, this.height * scaleY * 0.7, 'eliminator', 'Eliminator', `${this.eliminatorType}, ${this.eliminatorBladeCount} blades`);
                    
                    // Air outlet
                    this.addSchematicComponent(schematic, 'Air Outlet', (1 + this.width * 0.8 + this.eliminatorDepth) * scaleX, 0.3 * scaleY, 0.8 * scaleX, this.height * scaleY * 0.7, 'air-outlet', 'Air Outlet', 'Clean air exit');
                    
                    // Water distribution (top)
                    this.addSchematicComponent(schematic, 'Water Distribution', 1 * scaleX, 0.1 * scaleY, this.width * scaleX * 0.8, 0.2 * scaleY, 'water-distribution', 'Water Distribution', `${this.totalNozzleCount} nozzles, ${this.totalWaterFlow.toFixed(0)} l/min`);
                    
                    // Pump section (bottom)
                    const pumpWidth = Math.min(2, this.width * 0.6);
                    this.addSchematicComponent(schematic, 'Pump & Motor', 1 * scaleX, (this.height * 0.7 + 0.5) * scaleY, pumpWidth * scaleX, 0.8 * scaleY, 'pump-section', 'Pump & Motor', `${this.pumpCount} pumps, ${this.motorPower.toFixed(1)} kW each`);
                    
                    // Control panel
                    this.addSchematicComponent(schematic, 'Control Panel', (1 + this.width * 0.8 - 1) * scaleX, (this.height * 0.7 + 0.5) * scaleY, 1 * scaleX, 0.8 * scaleY, 'control-panel', 'Control Panel', 'PLC, VFDs, Instruments');
                    
                    // Air flow arrows
                    this.drawArrow(schematic, 0.2 * scaleX, (this.height * 0.7 / 2) * scaleY, 0.8 * scaleX, 0, '#2196f3', 'Air Flow');
                    this.drawArrow(schematic, 1 * scaleX, (this.height * 0.7 / 2) * scaleY, this.width * 0.8 * scaleX, 0, '#2196f3');
                    this.drawArrow(schematic, (1 + this.width * 0.8) * scaleX, (this.height * 0.7 / 2) * scaleY, this.eliminatorDepth * scaleX, 0, '#2196f3');
                    this.drawArrow(schematic, (1 + this.width * 0.8 + this.eliminatorDepth) * scaleX, (this.height * 0.7 / 2) * scaleY, 0.6 * scaleX, 0, '#4caf50');
                },
                
                addSchematicComponent(parent, id, x, y, width, height, className, label, details) {
                    const component = document.createElement('div');
                    component.className = `schematic-component ${className}`;
                    component.id = id;
                    component.style.left = `${x}px`;
                    component.style.top = `${y}px`;
                    component.style.width = `${width}px`;
                    component.style.height = `${height}px`;
                    
                    component.innerHTML = `
                        <div class="schematic-label">${label}</div>
                        <div class="schematic-details">${details}</div>
                    `;
                    
                    parent.appendChild(component);
                },
                
                drawArrow(parent, x, y, length, angle, color, label) {
                    const arrow = document.createElement('div');
                    arrow.style.position = 'absolute';
                    arrow.style.left = `${x}px`;
                    arrow.style.top = `${y}px`;
                    arrow.style.width = `${length}px`;
                    arrow.style.height = '2px';
                    arrow.style.backgroundColor = color;
                    arrow.style.transform = `rotate(${angle}deg)`;
                    arrow.style.transformOrigin = '0 0';
                    
                    // Arrow head
                    const head = document.createElement('div');
                    head.style.position = 'absolute';
                    head.style.right = '0';
                    head.style.top = '-4px';
                    head.style.width = '0';
                    head.style.height = '0';
                    head.style.borderTop = '5px solid transparent';
                    head.style.borderBottom = '5px solid transparent';
                    head.style.borderLeft = `10px solid ${color}`;
                    
                    arrow.appendChild(head);
                    
                    // Label
                    if (label) {
                        const labelEl = document.createElement('div');
                        labelEl.style.position = 'absolute';
                        labelEl.style.top = '-20px';
                        labelEl.style.left = '10px';
                        labelEl.style.color = color;
                        labelEl.style.fontSize = '10px';
                        labelEl.style.fontWeight = 'bold';
                        labelEl.textContent = label;
                        arrow.appendChild(labelEl);
                    }
                    
                    parent.appendChild(arrow);
                },
                
                // Export functions
                printBOM() {
                    window.print();
                },
                
                exportBOM() {
                    // Create CSV content
                    let csv = "Category,Part Number,Description,Material,Standard,Quantity,Unit,Unit Weight (kg),Total Weight (kg)\n";
                    
                    // Add data from BOM table
                    const rows = document.querySelectorAll('.bom-table tbody tr');
                    rows.forEach(row => {
                        const cells = row.querySelectorAll('td');
                        if (cells.length > 0) {
                            const rowData = Array.from(cells).map(cell => {
                                // Handle Alpine.js bindings
                                if (cell.hasAttribute('x-text')) {
                                    const expr = cell.getAttribute('x-text');
                                    // Simple evaluation - in real app would need proper Alpine evaluation
                                    return cell.textContent;
                                }
                                return cell.textContent;
                            }).join(',');
                            csv += rowData + "\n";
                        }
                    });
                    
                    // Create download link
                    const blob = new Blob([csv], { type: 'text/csv' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `AirWasher_BOM_${new Date().toISOString().slice(0,10)}.csv`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                }
            }
        }
    </script>
</body>
</html>