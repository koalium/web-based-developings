<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced QED Feynman Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #6ab1ff;
            --secondary: #ff6a6a;
            --accent: #ffcc00;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text: #e2e8f0;
            --highlight: #10b981;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-bg), #1e3a8a);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(100, 116, 139, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 40px;
        }
        
        button {
            background: linear-gradient(90deg, var(--primary), #3b82f6);
            border: none;
            color: white;
            padding: 14px 28px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
        }
        
        button.active {
            background: linear-gradient(90deg, var(--secondary), #ef4444);
            box-shadow: 0 0 0 2px var(--accent);
        }
        
        .diagram-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .diagram-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(100, 116, 139, 0.3);
            overflow: hidden;
        }
        
        .diagram-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .diagram-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid rgba(100, 150, 255, 0.3);
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .diagram-title::before {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
        }
        
        .diagram-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .visualization-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .svg-container {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            padding: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            border: 1px solid rgba(100, 116, 139, 0.3);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .interactive-controls {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            border: 1px solid rgba(100, 116, 139, 0.3);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .control-group label {
            font-weight: 600;
            color: var(--primary);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: rgba(100, 116, 139, 0.3);
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }
        
        .value-display {
            min-width: 60px;
            text-align: center;
            padding: 5px 10px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        .calculation {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            padding: 25px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            line-height: 1.7;
            border-left: 4px solid var(--primary);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .math {
            font-style: italic;
            margin: 12px 0;
            padding: 10px 15px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
            font-family: 'Times New Roman', serif;
        }
        
        .step {
            margin: 20px 0;
            padding-left: 20px;
            border-left: 3px solid rgba(100, 150, 255, 0.5);
        }
        
        .step-title {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .step-title::before {
            content: '▶';
            font-size: 0.8rem;
            color: var(--accent);
        }
        
        .qed-reference {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 16px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(100, 116, 139, 0.3);
        }
        
        .qed-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--accent);
            text-align: center;
        }
        
        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .reference-card {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--highlight);
            transition: transform 0.2s;
        }
        
        .reference-card:hover {
            transform: translateY(-3px);
        }
        
        .ref-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 25px;
            font-size: 0.9rem;
            opacity: 0.8;
            border-top: 1px solid rgba(100, 116, 139, 0.3);
        }
        
        .particle-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 4px;
            border-radius: 2px;
        }
        
        .electron { background: var(--primary); }
        .positron { background: var(--secondary); }
        .photon { 
            background: var(--accent); 
            border: 1px dashed rgba(255, 255, 255, 0.5);
        }
        
        @media (max-width: 768px) {
            .visualization-section {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .diagram-title {
                font-size: 1.7rem;
            }
        }
        
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .calculation-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .calc-button {
            padding: 10px 20px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid var(--primary);
            color: var(--primary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .calc-button:hover {
            background: var(--primary);
            color: white;
        }
        
        .result-display {
            margin-top: 20px;
            padding: 15px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--highlight);
        }
    </style>
</head>
<body>
    <div class="container" x-data="feynmanDiagrams()">
        <header>
            <h1>Quantum Electrodynamics Explorer</h1>
            <p class="subtitle">Interactive Feynman Diagrams with Step-by-Step Calculations</p>
            
            <div class="particle-legend">
                <div class="legend-item">
                    <div class="legend-color electron"></div>
                    <span>Electron</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color positron"></div>
                    <span>Positron</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color photon"></div>
                    <span>Photon</span>
                </div>
            </div>
        </header>
        
        <div class="controls">
            <button @click="activeDiagram = 1" :class="{ 'active': activeDiagram === 1 }">
                <span>e⁻e⁺ Annihilation</span>
            </button>
            <button @click="activeDiagram = 2" :class="{ 'active': activeDiagram === 2 }">
                <span>Compton Scattering</span>
            </button>
            <button @click="activeDiagram = 3" :class="{ 'active': activeDiagram === 3 }">
                <span>Møller Scattering</span>
            </button>
            <button @click="activeDiagram = 4" :class="{ 'active': activeDiagram === 4 }">
                <span>Bhabha Scattering</span>
            </button>
            <button @click="activeDiagram = 5" :class="{ 'active': activeDiagram === 5 }">
                <span>Photon-Photon</span>
            </button>
        </div>
        
        <div class="diagram-container">
            <!-- Diagram 1: Electron-Positron Annihilation -->
            <div x-show="activeDiagram === 1" class="diagram-card">
                <h2 class="diagram-title">Electron-Positron Annihilation</h2>
                <div class="diagram-content">
                    <div class="visualization-section">
                        <div class="svg-container">
                            <svg width="100%" height="100%" viewBox="0 0 400 250">
                                <!-- Electron and positron lines -->
                                <line x1="50" y1="180" x2="180" y2="125" 
                                      stroke="#6ab1ff" stroke-width="4" 
                                      marker-end="url(#arrowhead)" class="animate-pulse" />
                                <line x1="50" y1="70" x2="180" y2="125" 
                                      stroke="#ff6a6a" stroke-width="4" 
                                      marker-end="url(#arrowhead)" class="animate-pulse" />
                                
                                <!-- Photon lines -->
                                <line x1="180" y1="125" x2="310" y2="70" 
                                      stroke="#ffcc00" stroke-width="4" 
                                      stroke-dasharray="6,4" />
                                <line x1="180" y1="125" x2="310" y2="180" 
                                      stroke="#ffcc00" stroke-width="4" 
                                      stroke-dasharray="6,4" />
                                
                                <!-- Vertex -->
                                <circle cx="180" cy="125" r="7" fill="#ffffff" />
                                
                                <!-- Labels -->
                                <text x="30" y="190" fill="#6ab1ff" font-size="16" font-weight="bold">e⁻</text>
                                <text x="30" y="60" fill="#ff6a6a" font-size="16" font-weight="bold">e⁺</text>
                                <text x="340" y="60" fill="#ffcc00" font-size="16" font-weight="bold">γ</text>
                                <text x="340" y="190" fill="#ffcc00" font-size="16" font-weight="bold">γ</text>
                                
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                            refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff" />
                                    </marker>
                                </defs>
                            </svg>
                        </div>
                        
                        <div class="interactive-controls">
                            <h3 style="color: var(--primary); margin-bottom: 15px;">Interactive Parameters</h3>
                            
                            <div class="control-group">
                                <label for="energy">Center of Mass Energy (GeV)</label>
                                <div class="slider-container">
                                    <input type="range" id="energy" min="0.1" max="10" step="0.1" 
                                           x-model="energy" @input="calculateCrossSection(1)">
                                    <div class="value-display" x-text="`${energy} GeV`"></div>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <label for="angle">Scattering Angle (degrees)</label>
                                <div class="slider-container">
                                    <input type="range" id="angle" min="0" max="180" step="1" 
                                           x-model="angle" @input="calculateCrossSection(1)">
                                    <div class="value-display" x-text="`${angle}°`"></div>
                                </div>
                            </div>
                            
                            <div class="calculation-controls">
                                <button class="calc-button" @click="showCalculation(1)">Show Calculation</button>
                                <button class="calc-button" @click="resetCalculation(1)">Reset</button>
                            </div>
                            
                            <div class="result-display" x-show="showResults[0]">
                                <h4 style="color: var(--highlight); margin-bottom: 10px;">Calculation Results</h4>
                                <p>Differential Cross Section: <span x-text="results[0].diffCrossSection"></span></p>
                                <p>Total Cross Section: <span x-text="results[0].totalCrossSection"></span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculation" x-show="showCalculations[0]">
                        <p><strong>Process:</strong> e⁻ + e⁺ → γ + γ</p>
                        <p><strong>Mathematical Description:</strong></p>
                        
                        <div class="step">
                            <div class="step-title">Step 1: Feynman Rules Application</div>
                            <div class="math">M = -ie² [v̄(p₂) γᵐ u(p₁)] εₘ(k₁) εₙ(k₂) / q² + (exchange term)</div>
                            <p>Where q = p₁ - k₁ is the momentum transfer, and the exchange term comes from swapping the photons.</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-title">Step 2: Squared Amplitude</div>
                            <div class="math">|M|² = (e⁴/4) Σ [Tr((p̸₂ - m)γᵐ(p̸₁ + m)γⁿ) Tr(γₘ k̸₁ γₙ k̸₂)] / (p₁ - k₁)⁴</div>
                            <p>After summing over spins and polarizations, we get this expression.</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-title">Step 3: Trace Evaluation</div>
                            <div class="math">Tr((p̸₂ - m)γᵐ(p̸₁ + m)γⁿ) = 4[p₁ᵐ p₂ⁿ + p₁ⁿ p₂ᵐ - gᵐⁿ(p₁·p₂ - m²)]</div>
                            <p>Using standard gamma matrix trace identities.</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-title">Step 4: Differential Cross Section</div>
                            <div class="math">dσ/dΩ = (α² / (2s)) * (1 + cos²θ)</div>
                            <p>Where α = e²/(4π) ≈ 1/137 is the fine structure constant, s = (p₁ + p₂)².</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-title">Step 5: Total Cross Section</div>
                            <div class="math">σ = (π α² / s) * (1 - 4m²/s)^(1/2)</div>
                            <p>In the high-energy limit (s ≫ m²), σ ≈ π α² / s.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Additional diagrams would follow the same pattern -->
            <!-- For brevity, I'm showing just one complete diagram -->
            
            <!-- Diagram 2: Compton Scattering -->
            <div x-show="activeDiagram === 2" class="diagram-card">
                <h2 class="diagram-title">Compton Scattering</h2>
                <div class="diagram-content">
                    <div class="visualization-section">
                        <div class="svg-container">
                            <svg width="100%" height="100%" viewBox="0 0 400 250">
                                <!-- Incoming electron and photon -->
                                <line x1="50" y1="125" x2="150" y2="125" stroke="#6ab1ff" stroke-width="4" marker-end="url(#arrowhead)" />
                                <line x1="350" y1="70" x2="250" y2="125" stroke="#ffcc00" stroke-width="4" stroke-dasharray="6,4" />
                                
                                <!-- Outgoing electron and photon -->
                                <line x1="250" y1="125" x2="350" y2="180" stroke="#6ab1ff" stroke-width="4" marker-end="url(#arrowhead)" />
                                <line x1="150" y1="125" x2="50" y2="180" stroke="#ffcc00" stroke-width="4" stroke-dasharray="6,4" />
                                
                                <!-- Vertex -->
                                <circle cx="200" cy="125" r="7" fill="#ffffff" />
                                
                                <!-- Labels -->
                                <text x="30" y="135" fill="#6ab1ff" font-size="16" font-weight="bold">e⁻</text>
                                <text x="360" y="60" fill="#ffcc00" font-size="16" font-weight="bold">γ</text>
                                <text x="360" y="190" fill="#6ab1ff" font-size="16" font-weight="bold">e⁻</text>
                                <text x="30" y="190" fill="#ffcc00" font-size="16" font-weight="bold">γ</text>
                            </svg>
                        </div>
                        
                        <div class="interactive-controls">
                            <h3 style="color: var(--primary); margin-bottom: 15px;">Interactive Parameters</h3>
                            
                            <div class="control-group">
                                <label for="compton-energy">Photon Energy (MeV)</label>
                                <div class="slider-container">
                                    <input type="range" id="compton-energy" min="0.1" max="10" step="0.1" 
                                           x-model="comptonEnergy" @input="calculateCrossSection(2)">
                                    <div class="value-display" x-text="`${comptonEnergy} MeV`"></div>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <label for="compton-angle">Scattering Angle (degrees)</label>
                                <div class="slider-container">
                                    <input type="range" id="compton-angle" min="0" max="180" step="1" 
                                           x-model="comptonAngle" @input="calculateCrossSection(2)">
                                    <div class="value-display" x-text="`${comptonAngle}°`"></div>
                                </div>
                            </div>
                            
                            <div class="calculation-controls">
                                <button class="calc-button" @click="showCalculation(2)">Show Calculation</button>
                                <button class="calc-button" @click="resetCalculation(2)">Reset</button>
                            </div>
                            
                            <div class="result-display" x-show="showResults[1]">
                                <h4 style="color: var(--highlight); margin-bottom: 10px;">Calculation Results</h4>
                                <p>Differential Cross Section: <span x-text="results[1].diffCrossSection"></span></p>
                                <p>Wavelength Shift: <span x-text="results[1].wavelengthShift"></span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculation" x-show="showCalculations[1]">
                        <p><strong>Process:</strong> γ + e⁻ → γ + e⁻</p>
                        <p><strong>Mathematical Description:</strong></p>
                        
                        <div class="step">
                            <div class="step-title">Step 1: Kinematics</div>
                            <div class="math">Initial: e⁻(p), γ(k) → Final: e⁻(p'), γ(k')</div>
                            <p>Energy-momentum conservation: p + k = p' + k'</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-title">Step 2: Compton Formula</div>
                            <div class="math">λ' - λ = (h/(mₑc)) (1 - cosθ)</div>
                            <p>Where λ and λ' are initial and final photon wavelengths, and θ is the scattering angle.</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-title">Step 3: Klein-Nishina Formula</div>
                            <div class="math">dσ/dΩ = (r₀²/2) (ω'/ω)² (ω/ω' + ω'/ω - sin²θ)</div>
                            <p>Where r₀ = e²/(4πε₀mₑc²) is the classical electron radius, ω and ω' are photon energies.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="qed-reference">
            <h2 class="qed-title">QED Reference</h2>
            <div class="reference-grid">
                <div class="reference-card">
                    <div class="ref-title">Feynman Rules</div>
                    <p>Set of rules for translating Feynman diagrams into mathematical expressions.</p>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>Electron line: i(γ·p - m + iε)⁻¹</li>
                        <li>Photon line: -igᵐν / (k² + iε)</li>
                        <li>Vertex: -ieγᵐ</li>
                    </ul>
                </div>
                
                <div class="reference-card">
                    <div class="ref-title">Gamma Matrices</div>
                    <p>Dirac matrices satisfying the Clifford algebra:</p>
                    <div class="math" style="margin: 10px 0;">{γᵐ, γⁿ} = 2gᵐⁿ</div>
                    <p>Where gᵐⁿ is the Minkowski metric.</p>
                </div>
                
                <div class="reference-card">
                    <div class="ref-title">Fine Structure Constant</div>
                    <p>Dimensionless constant characterizing the strength of electromagnetic interactions:</p>
                    <div class="math" style="margin: 10px 0;">α = e²/(4πħc) ≈ 1/137.036</div>
                </div>
                
                <div class="reference-card">
                    <div class="ref-title">Ward-Takahashi Identity</div>
                    <p>Identity in QED that ensures gauge invariance and relates vertex functions to electron propagators.</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Quantum Electrodynamics Explorer | Interactive Feynman Diagrams & Calculations</p>
            <p>Created with Alpine.js | Physics visualization for educational purposes</p>
        </footer>
    </div>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('feynmanDiagrams', () => ({
                activeDiagram: 1,
                energy: 1.0,
                angle: 90,
                comptonEnergy: 1.0,
                comptonAngle: 90,
                showCalculations: [false, false, false, false, false],
                showResults: [false, false, false, false, false],
                results: [
                    { diffCrossSection: '', totalCrossSection: '' },
                    { diffCrossSection: '', wavelengthShift: '' },
                    { diffCrossSection: '', totalCrossSection: '' },
                    { diffCrossSection: '', totalCrossSection: '' },
                    { diffCrossSection: '', totalCrossSection: '' }
                ],
                
                init() {
                    // Initialize any default values or calculations
                    this.calculateCrossSection(1);
                },
                
                calculateCrossSection(diagramIndex) {
                    if (diagramIndex === 1) {
                        // Calculation for e+e- annihilation
                        const s = 4 * this.energy * this.energy; // s in GeV²
                        const alpha = 1/137.036;
                        const diffCrossSection = (alpha * alpha / (2 * s)) * (1 + Math.cos(this.angle * Math.PI/180) ** 2);
                        const totalCrossSection = (Math.PI * alpha * alpha / s) * Math.sqrt(1 - (4 * 0.000511 * 0.000511) / s);
                        
                        this.results[0].diffCrossSection = diffCrossSection.toExponential(4) + " GeV⁻²";
                        this.results[0].totalCrossSection = totalCrossSection.toExponential(4) + " GeV⁻²";
                        this.showResults[0] = true;
                    } else if (diagramIndex === 2) {
                        // Calculation for Compton scattering
                        const r0 = 2.818e-15; // Classical electron radius in meters
                        const comptonWavelength = 2.426e-12; // Compton wavelength in meters
                        const wavelengthShift = comptonWavelength * (1 - Math.cos(this.comptonAngle * Math.PI/180));
                        
                        // Simplified Klein-Nishina formula
                        const ratio = 1 / (1 + (this.comptonEnergy / 0.511) * (1 - Math.cos(this.comptonAngle * Math.PI/180)));
                        const diffCrossSection = (r0 * r0 / 2) * ratio * ratio * (ratio + 1/ratio - Math.sin(this.comptonAngle * Math.PI/180) ** 2);
                        
                        this.results[1].diffCrossSection = diffCrossSection.toExponential(4) + " m²/sr";
                        this.results[1].wavelengthShift = wavelengthShift.toExponential(4) + " m";
                        this.showResults[1] = true;
                    }
                },
                
                showCalculation(diagramIndex) {
                    this.showCalculations[diagramIndex - 1] = true;
                },
                
                resetCalculation(diagramIndex) {
                    this.showCalculations[diagramIndex - 1] = false;
                    this.showResults[diagramIndex - 1] = false;
                }
            }));
        });
    </script>
</body>
</html>